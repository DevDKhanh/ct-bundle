System.register("bundle://KKAuthBundle/_virtual/AsyncHelper.ts",["cc","./CocosHelper.ts"],(function(n){var e,t,o,u,c,r;return{setters:[function(n){e=n.cclegacy,t=n.assetManager,o=n.Canvas,u=n.tween,c=n.log},function(n){r=n.default}],execute:function(){e._RF.push({},"73bdcxxabFLx7t0M0O310uD","AsyncHelper",void 0);n("default",function(){function n(){}return n.sleepAsync=function(n,e){return new Promise((function(t,u){e||(e=r.getRoot().getComponent(o)),e.scheduleOnce((function(){t(null)}),n)}))},n.tweenAsync=function(n,e){return new Promise((function(t){u(n).then(e).call(t).start()}))},n.loadBundleAsync=function(n){return new Promise((function(e,o){t.loadBundle(n,(function(t,u){c("load bundle",n),t?o(t):e(u)}))}))},n.preloadAsync=function(n,e,t,o){return new Promise((function(u,c){n.preload(e,t,(function(n,e,t){o&&o(n,e)}),(function(n,e){n?c(n):u()}))}))},n.preloadDirAsync=function(n,e,t){return new Promise((function(o,u){n.preloadDir(e,(function(n,e,o){t&&t(n,e)}),(function(n,e){n?u(n):o()}))}))},n.loadDirAsync=function(n,e,t){return new Promise((function(o,u){n.loadDir(e,(function(n,e,o){t&&t(n,e)}),(function(n,e){n?u(n):o()}))}))},n.loadAsync=function(n,e,t,o){return new Promise((function(u,c){n.load(e,t,(function(n,e,t){o&&o(n,e)}),(function(n,e){n?c(n):u(e)}))}))},n.prototype.get=function(n,e,o){return void 0===o&&(o="resources"),t.getBundle(o).get(n,e)},n.execPerFrameAsync=function(n,e,t){return t||(t=r.getRoot().getComponent(o)),new Promise((function(o,u){!function u(){for(var c=Date.now(),r=n.next();;r=n.next()){if(!r||r.done)return void o();if(Date.now()-c>e)return void t.scheduleOnce((function(){u()}))}}()}))},n}());e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/BaseSocket.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,s,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.warn,s=t.log,i=t.error}],execute:function(){n._RF.push({},"ac152Scz+pBFJutqPd0SBev","BaseSocket",void 0);var c=t("SocketErrCode",{NoThisSocket:100,SendFailure:101});t("BaseSocket",function(){function t(){this._ws=null,this._connectOptions=null,this._heartTimer=null,this._curHeartOutCnt=0,this._curAutoReconnect=0,this._reconnectTimer=0,this._req2respCallbacks={},this._server2ClientListeners={},this._connectedCB=null}var n=t.prototype;return n.connectAsync=function(t,e){var n=this;null==this._connectOptions&&(this._connectOptions={url:t.url?t.url:(t.protocol?t.protocol:"ws")+"://"+t.ip+":"+t.port,binaryType:t.binaryType?t.binaryType:"arraybuffer",autoReconnect:t.autoReconnect?t.autoReconnect:0,reconnectTime:t.reconnectTime?t.reconnectTime:6,heartTime:t.heartTime?t.heartTime:3,heartOutCount:t.heartOutCount?t.heartOutCount:3,getHeartbeat:t.getHeartbeat?t.getHeartbeat:function(){return""},parseNetData:t.parseNetData?t.parseNetData:function(t){return{cmd:0,content:t}},tips:t.tips?t.tips:{},manualReconnect:t.manualReconnect?t.manualReconnect:function(){return o("manualReconnect undefined")}},this._connectedCB=e||function(){});var i=!0;return new Promise((function(t,e){var o;if(n._ws){if(n._ws.readyState===WebSocket.CONNECTING)return s("ws connecting, wait for a moment..."),void t();if(n._ws.readyState===WebSocket.OPEN)return s("ws has connected!"),void t()}s("net is connecting!"),null==(o=n._connectOptions.tips)||o.showConnecting(!0),n._ws=new WebSocket(n._connectOptions.url),n._ws.binaryType=n._connectOptions.binaryType,n._ws.onopen=function(e){var o;i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),t(),n._connectedCB(),n._onOpen(e)},n._ws.onmessage=function(t){n._onMessage(t.data)},n._ws.onerror=function(t){var o;i&&(i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),e(t));n._onError(t)},n._ws.onclose=function(t){var o;i&&(i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),e(t));n._onClose(t)}}))},n.reqAsync=function(t,e,n){var o,s=this;return void 0===n&&(n=!1),n&&(null==(o=this._connectOptions.tips)||o.showRequesting(!0)),new Promise((function(o,i){var r;if(!s._send(e))return n&&(null==(r=s._connectOptions.tips)||r.showRequesting(!1)),void i(c.SendFailure);s._req2respCallbacks[t]||(s._req2respCallbacks[t]=[]),s._req2respCallbacks[t].push((function(t){var e;n&&(null==(e=s._connectOptions.tips)||e.showRequesting(!1)),o(t)}))}))},n.close=function(t){if(void 0===t&&(t=!1),this._stopHeartTimer(),this._stopReconnectTimer(),this._ws){var e;if(this._ws.readyState==WebSocket.CONNECTING||this._ws.readyState==WebSocket.CLOSING)null==(e=this._connectOptions.tips)||e.showConnecting(!1);this._clearReqList(),t&&(this._server2ClientListeners={}),this._ws.onopen=function(t){},this._ws.onmessage=function(t){},this._ws.onerror=function(t){},this._ws.onclose=function(t){},this._ws.readyState!=WebSocket.CLOSED&&this._ws.close(),s("ws closed manually")}},n.on=function(t,e,n){this._server2ClientListeners[t]||(this._server2ClientListeners[t]=[]),-1===this._server2ClientListeners[t].findIndex((function(t){return t.target===n&&t.callback===e}))&&this._server2ClientListeners[t].push({target:n,callback:e})},n.off=function(t,e,n){var o=this._server2ClientListeners[t];if(o){var s=o.findIndex((function(t){return t.target===n&&t.callback===e}));-1!==s&&o.splice(s,1)}},n._onOpen=function(t){s("ws connected!"),this._stopReconnectTimer(),this._startHeartTimer()},n._onMessage=function(t){this._curHeartOutCnt=0,t&&this._onRecv(t)},n._onError=function(t){i("ws error!",t)},n._onClose=function(t){s("ws closed!",t.code,t.reason),this._stopHeartTimer(),this._stopReconnectTimer(),this._clearReqList(),this._doReconnect()},n._send=function(t){return this._ws&&this._ws.readyState===WebSocket.OPEN?(this._ws.send(t),!0):(o("send exceptionally"),!1)},n._clearReqList=function(){for(var t in this._req2respCallbacks){this._req2respCallbacks[t].forEach((function(t,e){t(null)}))}this._req2respCallbacks={}},n._onRecv=function(t){var n=this._connectOptions.parseNetData(t);if(n){var s=this._req2respCallbacks[n.cmd];if(s&&s.length>0)s.shift()(n.content);var i=this._server2ClientListeners[n.cmd];if(i)for(var c,r=e(i);!(c=r()).done;){var a=c.value;a.callback.call(a.target,n.content)}}else o("ParseNetData Error! ",t)},n._doReconnect=function(){var t,e,n=this,o=this._connectOptions.autoReconnect;0==o||o>0&&this._curAutoReconnect>=o?null==(t=this._connectOptions)||t.manualReconnect():(o>0&&++this._curAutoReconnect,s("net is reconnecting!"),null==(e=this._connectOptions.tips)||e.showReconnecting(!0),this._reconnectTimer=setTimeout((function(){var t;null==(t=n._connectOptions.tips)||t.showReconnecting(!1),n.connectAsync(n._connectOptions,n._connectedCB)}),1e3*this._connectOptions.reconnectTime))},n._startHeartTimer=function(){var t=this;this._curHeartOutCnt=0,this._stopHeartTimer(),this._heartTimer=setInterval((function(){if(++t._curHeartOutCnt,t._curHeartOutCnt>t._connectOptions.heartOutCount)return s("ws disconnected! -- heart out"),t.close(),void t._doReconnect();t._send(t._connectOptions.getHeartbeat())}),1e3*this._connectOptions.heartTime)},n._stopHeartTimer=function(){this._heartTimer&&clearInterval(this._heartTimer),this._heartTimer=null},n._stopReconnectTimer=function(){this._reconnectTimer&&clearTimeout(this._reconnectTimer),this._reconnectTimer=null},t}());n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/CocosHelper.ts",["cc","./kk.ts"],(function(e){var t,i,o,n,r,a,d,p,l,g,c,f;return{setters:[function(e){t=e.cclegacy,i=e.director,o=e.Sprite,n=e.Color,r=e.Label,a=e.Widget,d=e.Layout,p=e.UITransform,l=e.builtinResMgr,g=e.ImageAsset,c=e.Texture2D,f=e.SpriteFrame},null],execute:function(){t._RF.push({},"1d4c6haefZJ0JyHbpV5WuLI","CocosHelper",void 0);e("default",function(){function e(){}return e.getRoot=function(){return i.getScene().getChildByName("Canvas")},e.addSprite=function(e,t){if(e){"number"!=typeof t.type&&(t.type=o.Type.SIMPLE),"number"!=typeof t.sizeMode&&(t.sizeMode=o.SizeMode.TRIMMED),"boolean"!=typeof t.trim&&(t.trim=!0);var i=e.addComponent(o);return i.spriteFrame=t.spriteFrame,i.type=t.type,i.sizeMode=t.sizeMode,i.trim=t.trim,i}},e.addLabel=function(e,t){if(e){t.fontSize||(t.fontSize=40),t.color||(t.color=n.WHITE),t.lineHeight||(t.lineHeight=t.fontSize),"number"!=typeof t.horizontalAlign&&(t.horizontalAlign=r.HorizontalAlign.CENTER),"number"!=typeof t.verticalAlign&&(t.verticalAlign=r.VerticalAlign.CENTER),"number"!=typeof t.overflow&&(t.overflow=r.Overflow.NONE),"number"!=typeof t.cacheMode&&(t.cacheMode=r.CacheMode.NONE);var i=e.addComponent(r);return i.string=t.string,i.fontSize=t.fontSize,i.lineHeight=t.lineHeight,i.horizontalAlign=t.horizontalAlign,i.verticalAlign=t.verticalAlign,i.overflow=t.overflow,i.isBold=!!t.enableBold,i.isItalic=!!t.enableItalic,i.isUnderline=!!t.enableUnderline,i.enableWrapText=!!t.enableWrapText,i.cacheMode=t.cacheMode,i.color=t.color,i}},e.addWidget=function(e,t){if(e){var i=e.addComponent(a);return"number"==typeof t.left&&(i.isAlignLeft=!0,i.left=t.left),"number"==typeof t.right&&(i.isAlignRight=!0,i.right=t.right),"number"==typeof t.top&&(i.isAlignTop=!0,i.top=t.top),"number"==typeof t.bottom&&(i.isAlignBottom=!0,i.bottom=t.bottom),i}},e.addLayout=function(e,t){if(e){"number"!=typeof t.resizeMode&&(t.resizeMode=d.ResizeMode.CONTAINER);var i=e.getComponent(p);i||e.addComponent(p),t.width&&(i.width=t.width),t.height&&(i.height=t.height);var o=e.addComponent(d);return o.type=t.type,o.resizeMode=t.resizeMode,o.affectedByScale=!!t.affectedByScale,o.type==d.Type.HORIZONTAL?(o.horizontalDirection="number"==typeof t.horizontalDirection?t.horizontalDirection:d.HorizontalDirection.LEFT_TO_RIGHT,o.spacingX=t.spacingX?t.spacingX:0,o.paddingLeft=t.paddingLeft?t.paddingLeft:0,o.paddingRight=t.paddingRight?t.paddingRight:0):o.type==d.Type.VERTICAL?(o.verticalDirection="number"==typeof t.verticalDirection?t.verticalDirection:d.VerticalDirection.TOP_TO_BOTTOM,o.spacingY=t.spacingY?t.spacingY:0,o.paddingTop=t.paddingTop?t.paddingTop:0,o.paddingBottom=t.paddingBottom?t.paddingBottom:0):o.type==d.Type.GRID&&(o.startAxis="number"==typeof t.startAxis?t.startAxis:d.AxisDirection.HORIZONTAL,o.horizontalDirection="number"==typeof t.horizontalDirection?t.horizontalDirection:d.HorizontalDirection.LEFT_TO_RIGHT,o.verticalDirection="number"==typeof t.verticalDirection?t.verticalDirection:d.VerticalDirection.TOP_TO_BOTTOM,o.spacingX=t.spacingX?t.spacingX:0,o.paddingLeft=t.paddingLeft?t.paddingLeft:0,o.paddingRight=t.paddingRight?t.paddingRight:0,o.spacingY=t.spacingY?t.spacingY:0,o.paddingTop=t.paddingTop?t.paddingTop:0,o.paddingBottom=t.paddingBottom?t.paddingBottom:0),o}},e.grayNode=function(t,i){void 0===i&&(i=!0),t.getComponent(o)?t.getComponent(o).grayscale=i:t.getComponent(r)&&t.getComponent(r).setSharedMaterial(l.get(i?"ui-sprite-gray-material":"ui-sprite-material"),0);for(var n=t.children.length-1;n>=0;--n)e.grayNode(t.children[n],i)},e.genPureColorSpriteFrame=function(e){void 0===e&&(e=n.BLACK);var t=new g({_data:new Uint8Array([e.r,e.g,e.b,e.a]),width:1,height:1,format:c.PixelFormat.RGBA8888,_compressed:!1}),i=new c;i.image=t;var o=new f;return o.texture=i,o.packable=!1,o},e}()),e("coin",(function(e){return Math.floor(Number(e)).toLocaleString("en-GB")}));t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/Config.ts",["cc","./DebugHelper.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},null],execute:function(){n._RF.push({},"40158SU0ZxOKLMdCmbFF5Lj","Config",void 0);e("Config",(function(){this.service=void 0}));n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/DebugHelper.ts",["cc","./TimeHelper.ts","./CocosHelper.ts"],(function(t){var e,n,o,i,r,a,l,d,c,g,u,s,h,v;return{setters:[function(t){e=t.cclegacy,n=t.log,o=t.warn,i=t.Color,r=t.error,a=t.Node,l=t.color,d=t.UITransform,c=t.Layout,g=t.ScrollView,u=t.Button,s=t.Label},function(t){h=t.default},function(t){v=t.default}],execute:function(){e._RF.push({},"3acbdy/4b9CtoNZOA4v1GTw","DebugHelper",void 0);var p=function(t){return t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t}(p||{});t("default",new(function(){function t(){this.Level=p,this.level=p.INFO,this.logContent=null}var e=t.prototype;return e.log=function(){if(this.level>=p.INFO){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];n.apply(void 0,["["+h.getCurDetailTime()+"]"].concat(e)),this.logContent&&this._addLblNode(JSON.stringify(e))}},e.warn=function(){if(this.level>=p.WARN){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.apply(void 0,["["+h.getCurDetailTime()+"]"].concat(e)),this.logContent&&this._addLblNode(JSON.stringify(e),i.YELLOW)}},e.error=function(){if(this.level>=p.ERROR){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.apply(void 0,["["+h.getCurDetailTime()+"]"].concat(e)),this.logContent&&this._addLblNode(JSON.stringify(e),i.RED)}},e.switchDebugLogBtn=function(){var t=v.getRoot().getChildByName("logBtn");t?t.active=!t.active:(this.level=p.INFO,this._initLogPanel())},e._initLogPanel=function(){var t=new a,e=v.getRoot();e.addChild(t),v.addSprite(t,{spriteFrame:v.genPureColorSpriteFrame(l(0,0,0,180))});var n=t.getComponent(d);n.setContentSize(e.getComponent(d).contentSize);var o=new a;o.addComponent(d).anchorY=1,o.parent=t,v.addWidget(o,{top:0}),v.addLayout(o,{type:c.Type.VERTICAL}),this.logContent=o;var r=t.addComponent(g);r.horizontal=!1,r.vertical=!0,r.bounceDuration=.23,r.brake=.75,r.content=o,t.active=!1;var s=new a("logBtn");s.addComponent(d).anchorX=1,s.setPosition(n.width/2,0),v.addLabel(s,{string:"DEBUG",fontSize:30,color:i.YELLOW,enableBold:!0}),e.addChild(s),s.addComponent(u),s.on(u.EventType.CLICK,(function(){t.active=!t.active}));var h=new a;h.setPosition(.5*n.width-100,.5*-n.height+100),v.addLabel(h,{string:"Clean",fontSize:30,color:i.RED,enableBold:!0}),t.addChild(h),h.addComponent(u),h.on(u.EventType.CLICK,(function(){o.removeAllChildren()}))},e._addLblNode=function(t,e){var n=new a;v.addLabel(n,{string:t,fontSize:24,color:e,overflow:s.Overflow.RESIZE_HEIGHT}),n.getComponent(d).width=this.logContent.parent.getComponent(d).width-20,n.parent=this.logContent},t}()));e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/DebugManger.ts",["cc","./kk.ts","./TimeHelper.ts","./CocosHelper.ts"],(function(e){var t,n,o,i,a,r,l,d,c,g,u,s,v,f,h;return{setters:[function(e){t=e.cclegacy,n=e.log,o=e.warn,i=e.Color,a=e.error,r=e.Node,l=e.color,d=e.UITransform,c=e.Layout,g=e.ScrollView,u=e.Button,s=e.Label},function(e){v=e.default},function(e){f=e.default},function(e){h=e.default}],execute:function(){t._RF.push({},"92a97FRRcFCp5MaT6sivuVS","DebugManger",void 0);var C=function(e){return e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e}(C||{});e("default",function(){function e(){this.level=C.INFO,this.logContent=null}var t=e.prototype;return t.log=function(){if(this.level>=C.INFO){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];n.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t))}},t.warn=function(){if(this.level>=C.WARN){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.YELLOW)}},t.error=function(){if(this.level>=C.ERROR){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.RED)}},t.switchDebugLogBtn=function(){var e=v.godNode.getChildByName("logBtn");e?e.active=!e.active:(this.level=C.INFO,this._initLogPanel())},t._initLogPanel=function(){var e=new r;v.godNode.addChild(e),h.addSprite(e,{spriteFrame:h.genPureColorSpriteFrame(l(0,0,0,180))});var t=e.getComponent(d);t.setContentSize(v.godNode.getComponent(d).contentSize);var n=new r;n.addComponent(d).anchorY=1,n.parent=e,h.addWidget(n,{top:0}),h.addLayout(n,{type:c.Type.VERTICAL}),this.logContent=n;var o=e.addComponent(g);o.horizontal=!1,o.vertical=!0,o.bounceDuration=.23,o.brake=.75,o.content=n,e.active=!1;var a=new r("logBtn");a.addComponent(d).anchorX=1,a.setPosition(t.width/2,0),h.addLabel(a,{string:"DEBUG",fontSize:30,color:i.YELLOW,enableBold:!0}),v.godNode.addChild(a),a.addComponent(u),a.on(u.EventType.CLICK,(function(){e.active=!e.active}));var s=new r;s.setPosition(.5*t.width-100,.5*-t.height+100),h.addLabel(s,{string:"Clean",fontSize:30,color:i.RED,enableBold:!0}),e.addChild(s),s.addComponent(u),s.on(u.EventType.CLICK,(function(){n.removeAllChildren()}))},t._addLblNode=function(e,t){var n=new r;h.addLabel(n,{string:e,fontSize:24,color:t,overflow:s.Overflow.RESIZE_HEIGHT}),n.getComponent(d).width=this.logContent.parent.getComponent(d).width-20,n.parent=this.logContent},e}()).Level=C,t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/EventManager.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"880304hnV5Pi7rmDyL9jULg","EventManager",void 0);t("default",function(){function t(){this._eventObjMap=new Map}var e=t.prototype;return e.on=function(t,e,n){this._on(t,e,n,!1)},e.once=function(t,e,n){this._on(t,e,n,!0)},e._on=function(t,e,n,a){var i=this._eventObjMap.get(t);i||(i=[],this._eventObjMap.set(t,i)),-1===i.findIndex((function(t){return t.target===n&&t.callback===e}))&&i.push({target:n,callback:e,once:a})},e.off=function(t,e,n){var a=this._eventObjMap.get(t);if(a)if(e&&n){var i=a.findIndex((function(t){return t.target===n&&t.callback===e}));-1!==i&&a.splice(i,1)}else a=null,this._eventObjMap.delete(t)},e.offTargetAll=function(t){this._eventObjMap.forEach((function(e,n){if(e)for(var a=e.length-1;a>=0;a--)e[a].target===t&&e.splice(a,1)}))},e.emit=function(t){var e=this._eventObjMap.get(t);if(e){for(var n=null,a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];for(var c=e.length-1;c>=0;c--)(n=e[c]).callback.apply(n.target,i),n.once&&e.splice(c,1)}},t}());e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts","./CocosHelper.ts"],(function(e){var t,i,s,o;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){s=e.default},function(e){o=e.coin}],execute:function(){i._RF.push({},"c7eaevsO9RA0p/DL5eXf7Mk","GameData",void 0);e("default",new(function(){function e(){this.id=void 0,this.username=void 0,this.displayName=void 0,this.token=void 0,this.refreshToken=void 0,this.gold=void 0,this.goldFree=void 0,this._elo=void 0,this._elobanqi=void 0,this.changedElo=0,this._isLoggedIn=!1}var i=e.prototype;return i.getElo=function(e){return void 0===e&&(e=!1),e?this._elobanqi:this._elo},i.setELo=function(e,t){void 0===t&&(t=!1),t?(this.changedElo=e-this._elobanqi,this._elobanqi=e):(this.changedElo=e-this._elo,this._elo=e)},i.login=function(e){var t=e.id,i=e.username,o=e.token,n=e.gold,l=e.goldFree,d=e.password,h=e.refreshToken,r=e.displayName;this.id=t,this.username=i,this.displayName=r,this.token=o,this.refreshToken=h,this.gold=n||0,this.goldFree=l||0,this._isLoggedIn=!0,s.localMgr.setItem("token",o,!0),s.localMgr.setItem("refreshToken",h,!0),s.localMgr.setItem("username",i,!0),s.localMgr.setItem("password",d,!0)},i.logout=function(){this.id=null,this.username=null,this.displayName=null,this.token=null,this.refreshToken=null,this.gold=0,this.goldFree=0,this._isLoggedIn=!1},i.updateDisplayName=function(e){this.displayName=e},t(e,[{key:"info",get:function(){return{id:this.id,username:this.username,displayName:this.displayName,token:this.token,gold:this.gold,goldFree:this.goldFree,goldString:o(this.gold),goldFreeString:o(this.goldFree)}}},{key:"isLoggedIn",get:function(){return this._isLoggedIn}}]),e}()));i._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/HttpManager.ts",["cc","./DebugHelper.ts"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy},function(e){o=e.default}],execute:function(){t._RF.push({},"27e7cz+RAxJ2Lc6W/RVFIDA","HttpManager",void 0);e("default",function(){function e(){}var t=e.prototype;return t.reqAsync=function(e,t){var o=this;return void 0===t&&(t={}),new Promise((function(n,r){o._request({url:e,timeout:t.timeout||8e3,responseType:t.responseType||"json",contentType:t.contentType||"application/x-www-form-urlencoded",method:t.method||(t.body?"POST":"GET"),body:t.body,token:t.token},n,r)}))},t._request=function(e,t,n){var r=new XMLHttpRequest;r.timeout=e.timeout,r.responseType=e.responseType,r.onreadystatechange=function(){var s,u,i,a;4===r.readyState&&((null==(s=r.response)?void 0:s.statusCode)>=200&&(null==(u=r.response)?void 0:u.statusCode)<=400?(o.log({url:e.url,body:e.body,recv:r.response}),t(r.response)):401==(null==(i=r.response)?void 0:i.statusCode)||403==(null==(a=r.response)?void 0:a.statusCode)?t(r.response):n("Please Check Network! "+r.status))},r.ontimeout=function(){n("Time Out")},r.onabort=function(){n("Network Abort")},r.onerror=function(){n("Network Error")},r.open(e.method,e.url,!0),e.token&&r.setRequestHeader("Authorization","Bearer "+e.token);var s=null;if(e.body)if(r.setRequestHeader("Content-Type",e.contentType),"application/x-www-form-urlencoded"==e.contentType){var u=[];for(var i in e.body)u.push("".concat(i,"=",e.body[i]));s=u.join("&")}else s="application/json"==e.contentType?JSON.stringify(e.body):e.body;r.send(s)},e}());t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/kk.ts",["cc","./UIManager.ts","./LocalManager.ts","./SoundManager.ts","./EventManager.ts","./DebugManger.ts","./HttpManager.ts","./SocketManager.ts","./LocalizationManager.ts","./Config.ts","./SkinManager.ts"],(function(n){var e,t,a,u,o,i,g,c,f,r,d,s;return{setters:[function(n){e=n.cclegacy,t=n.find},function(n){a=n.default},function(n){u=n.default},function(n){o=n.default},function(n){i=n.default},function(n){g=n.default},function(n){c=n.default},function(n){f=n.default},function(n){r=n.LocalizationManager},function(n){d=n.Config},function(n){s=n.SkinGameManager}],execute:function(){e._RF.push({},"d1b197geZhNFbP/VTdLfvan","kk",void 0);var l=n("default",{uiMgr:new a,localMgr:new u,soundMgr:new o,eventMgr:new i,debugMgr:new g,httpMgr:new c,socketMgr:new f,godNode:null,lang:new r,config:new d,skinsMgr:new s,init:function(){l.godNode=t("Canvas")}});e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKAuthBundle",["./KKAuthLayer.ts","./KKLoginPopup.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("bundle://KKAuthBundle/_virtual/KKAuthLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerBase.ts","./GameData.ts","./kk.ts","./RandomTextUtil.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./KKGameUIConf.ts","./KKUtils.ts"],(function(t){var e,n,r,a,o,s,u,i,c,l,h,p,f,d,g,m;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime,a=t.extends},function(t){o=t.cclegacy,s=t._decorator},function(t){u=t.LayerBase},function(t){i=t.default},function(t){c=t.default},function(t){l=t.RandomTextUtil},function(t){h=t.httpCenter},function(t){p=t.HttpRoute},function(t){f=t.KKAuthPopupConf,d=t.KKHomePopupConf,g=t.KKLayerConf},function(t){m=t.default}],execute:function(){var y;o._RF.push({},"305catlipNAIr8q6stRvlFp","KKAuthLayer",void 0);var v=s.ccclass;s.property,t("KKAuthLayer",v("KKAuthLayer")(y=function(t){function o(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).layer=null,e}e(o,t);var s=o.prototype;return s.onLoad=function(){this.layer=this.getObj("layer")},s.start=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleLogin();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.handleRegister=function(){var t=n(r().mark((function t(e,n){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.reqAsync(p.register,{body:{username:e,password:n},method:"POST"});case 2:if(201!=(o=t.sent).statusCode){t.next=8;break}return this.handleLoginGame(a({},o.data,{password:n})),t.abrupt("return",!0);case 8:return console.log("Đăng ký tài khoản thất bại",o),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),s.handleLoginRequest=function(){var t=n(r().mark((function t(e,n){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.reqAsync(p.login,{body:{username:e,password:n},method:"POST"});case 2:if(200!=(o=t.sent).statusCode){t.next=8;break}return this.handleLoginGame(a({},o.data,{password:n})),t.abrupt("return",!0);case 8:return this.layer.active=!0,c.localMgr.removeItem("token"),c.localMgr.removeItem("username"),c.localMgr.removeItem("password"),m.showToast("Xác thực tài khoản thất bại"),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),s.handleLoginGame=function(){var t=n(r().mark((function t(e){var n=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.setELo(e.elo),i.setELo(e.eloBanqi,!0),i.login({id:e.id,username:e.username,token:e.jwt,gold:e.gold,goldFree:e.goldFree,password:e.password,refreshToken:e.jwtRefresh,displayName:e.displayName}),i.isLoggedIn?c.uiMgr.preLoadLayerAsync(g.Home).then((function(){n.layer.active=!1,c.uiMgr.goLayerAsync(g.Home)})):(this.layer.active=!0,c.localMgr.removeItem("token"),c.localMgr.removeItem("username"),c.localMgr.removeItem("password"),m.showToast("Xác thực tài khoản thất bại"));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.handleLogin=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c.localMgr.getItemWithDefault("username",null,!0),n=c.localMgr.getItemWithDefault("password",null,!0),e&&n){t.next=7;break}return t.next=5,this.autoCreateAccount();case 5:t.next=9;break;case 7:return t.next=9,this.handleLoginRequest(e,n);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.autoCreateAccount=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="ngoalong"+l.radomNumber(10),n=l.radomText(10),t.next=4,this.handleRegister(e,n);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.refresh=function(){var t,e,a,o=this;null!=(t=this.recvData)&&t.isLogout&&(i.logout(),this.layer.active=!0,m.showCommonPopup({desc:"Tài khoản của bạn đã được đăng nhập trên thiết bị khác",title:"Thông báo",btnTxt:"Đăng nhập lại",btnTxtCls:"Tạo tài khoản mới",hideCloseCorner:!0,btnCall:(a=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c.localMgr.getItemWithDefault("username",null,!0),n=c.localMgr.getItemWithDefault("password",null,!0),!e||!n){t.next=7;break}return t.next=5,o.handleLoginRequest(e,n);case 5:t.sent&&c.uiMgr.goLayerAsync(g.Home);case 7:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)}),closeCall:(e=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.radomText(10),n=l.radomNumber(10),t.next=4,o.handleRegister(e,n);case 4:t.sent&&c.uiMgr.goLayerAsync(g.Home);case 6:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})})),this.recvData.logout&&(i.logout(),this.layer.active=!0)},s.onBtnClick=function(t,e){switch(e){case"auto-login":this.autoCreateAccount();break;case"setting":c.uiMgr.showPopupAsync(d.Setting);break;case"login":c.uiMgr.showPopupAsync(f.Login)}},o}(u))||y);o._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKGameUIConf.ts",["cc","./UIConfig.ts"],(function(e){var o,n;return{setters:[function(e){o=e.cclegacy},function(e){n=e.UICacheMode}],execute:function(){o._RF.push({},"8b633e6LxtCgol19ZuJSjzq","KKGameUIConf",void 0);var a=e("KKBundleConf",{Load:"KKLoadBundle",Common:"KKCommonBundle",CoTuong:"KKCoTuongBundle",Home:"KKHomeBundle",Audios:"Audios",Auth:"KKAuthBundle",Banqi:"KKBanqiBundle",PracticeWithBot:"KKPracticeWithBotBundle",CoThe:"KKCoTheBundle"});e("KKLayerConf",{Load:{bundle:a.Load,name:"KKLoadLayer"},CoTuong:{bundle:a.CoTuong,name:"KKCoTuongLayer",cacheMode:n.Cache},Home:{bundle:a.Home,name:"KKHomeLayer",cacheMode:n.Stay},Auth:{bundle:a.Auth,name:"KKAuthLayer",cacheMode:n.Stay},Banqi:{bundle:a.Banqi,name:"KKBanqiLayer"},PracticeWithBot:{bundle:a.PracticeWithBot,name:"KKPracticeWithBotLayer"},CoThe:{bundle:a.CoThe,name:"KKCoTheLayer",cacheMode:n.Stay}}),e("KKCommonWidgetConf",{Toast:{bundle:a.Common,name:"KKToastWidget",cacheMode:n.Cache},Loading:{bundle:a.Common,name:"KKLoadingWidget",cacheMode:n.Cache},CountDownCircle:{bundle:a.Common,name:"KKCountDownCircleWidget"},StatusPlayer:{bundle:a.Common,name:"KKStatusPlayerWidget"},TagRank:{bundle:a.Common,name:"KKTagRankWidget",cacheMode:n.Cache}}),e("KKHomePopupConf",{OptionsMatch:{bundle:a.Home,name:"KKOptionsMatchPopup"},Help:{bundle:a.Home,name:"KKHelpPopup"},Profile:{bundle:a.Home,name:"KKProfilePopup"},FogotPass:{bundle:a.Home,name:"KKFogotPassPopup"},InfoAccount:{bundle:a.Home,name:"KKInfoAccountPopup"},SettingPractice:{bundle:a.Home,name:"KKSettingPracticePopup"},Email:{bundle:a.Home,name:"KKEmailPopup",cacheMode:n.Cache},Setting:{bundle:a.Home,name:"KKSettingPopup",cacheMode:n.Cache},TopClass:{bundle:a.Home,name:"KKTopClassPopup",cacheMode:n.Cache},Friends:{bundle:a.Home,name:"KKFriendsPopup",cacheMode:n.Cache},ListMatches:{bundle:a.Home,name:"KKListMatchesPopup",cacheMode:n.Cache},CreateDisplayName:{bundle:a.Home,name:"KKCreateDisplayNamePopup",cacheMode:n.Cache}}),e("KKCommonPopupConf",{LuckyWheel:{bundle:a.Common,name:"KKLuckyWheelPopup"},DialogPopup:{bundle:a.Common,name:"DialogPopup",cacheMode:n.Cache}}),e("KKAuthPopupConf",{Login:{bundle:a.Auth,name:"KKLoginPopup",cacheMode:n.Cache}});o._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKHttpCenter.ts",["cc","./kk.ts","./KKUtils.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default},function(t){o=t.default}],execute:function(){n._RF.push({},"183e2smj5pCCoDMavSz54m7","KKHttpCenter",void 0);var i=function(t){return t[t.Nothing=0]="Nothing",t[t.Toast=1]="Toast",t[t.Popup=2]="Popup",t}(i||{});t("httpCenter",new(function(){function t(){this.FailType=i}var n=t.prototype;return n.reqAsync=function(t,n){var l,u,r,a,c;n||(n={});var s={body:n.body,baseUrl:null!=(l=n.baseUrl)?l:e.config.service.httpServer,timeout:null!=(u=n.timeout)?u:10,method:null!=(r=n.method)?r:"GET",loading:null==(a=n.loading)||a,failType:null!=(c=n.failType)?c:i.Popup};return s.loading&&o.showLoading(!0),this._reqAsync(s.baseUrl+t,s)},n._reqAsync=function(t,n){var l=this;return new Promise((function(u,r){e.httpMgr.reqAsync(t,{body:n.body,timeout:1e3*n.timeout,method:n.method,token:e.localMgr.getItemWithDefault("token","",!0)}).then(u).catch((function(e){n.failType==i.Nothing?r(e):n.failType==i.Toast?(o.showToast(e),r(e)):n.failType==i.Popup&&o.showCommonPopup({title:"Đã có lỗi xảy ra",desc:e,btnTxtCls:"Thử lại",closeCall:function(){l._reqAsync(t,n).then(u).catch(r)}})})).finally((function(){console.log("请求结束",t,n.body),n.loading&&o.showLoading(!1)}))}))},t}()));n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKHttpRoute.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"3d6d48plBpLdbPm2JN6Fvm6","KKHttpRoute",void 0);t("HttpRoute",{register:"/account/register",login:"/account/login",getUser:"/account/user",updateDisplayName:"/account/update-display-name",getFollowers:"/account-follow",getRanking:"/account-follow/ranking",follow:"/account-follow/follow",matches:"/account-follow/matches"});o._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKLoginPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./GameData.ts","./KKGameUIConf.ts","./kk.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./KKUtils.ts"],(function(e){var t,n,r,o,a,s,i,u,l,c,p,d,f,g,h,m,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime,i=e.extends},function(e){u=e.cclegacy,l=e._decorator,c=e.EditBox},function(e){p=e.PopupBase},function(e){d=e.default},function(e){f=e.KKLayerConf},function(e){g=e.default},function(e){h=e.httpCenter},function(e){m=e.HttpRoute},function(e){w=e.default}],execute:function(){var y,v,K,I,L,k,b;u._RF.push({},"a58a7x1Jv9HE7uN/MmkPY5z","KKLoginPopup",void 0);var M=l.ccclass,P=l.property;e("KKLoginPopup",(y=M("KKLoginPopup"),v=P(c),K=P(c),y((k=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(t,"usernameInput",k,o(t)),r(t,"passwordInput",b,o(t)),t}n(t,e);var u=t.prototype;return u.onLoad=function(){this.enableClickBlankToClose();var e=g.localMgr.getItemWithDefault("username",null,!0),t=g.localMgr.getItemWithDefault("password",null,!0);(e||t)&&(this.usernameInput.string=e,this.passwordInput.string=t)},u.handleLoginRequest=function(){var e=a(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=3;break}return w.showToast("Vui lòng nhập đầy đủ thông tin"),e.abrupt("return",!1);case 3:return e.next=5,h.reqAsync(m.login,{body:{username:t,password:n},method:"POST"});case 5:200==(r=e.sent).statusCode?(this.close(),this.handleLoginGame(i({},r.data,{password:n}))):(g.localMgr.removeItem("token"),g.localMgr.removeItem("username"),g.localMgr.removeItem("password"),w.showToast("Xác thực tài khoản thất bại"));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),u.handleLoginGame=function(){var e=a(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.setELo(t.elo),d.setELo(t.eloBanqi,!0),d.login({id:t.id,username:t.username,token:t.jwt,gold:t.gold,goldFree:t.goldFree,password:t.password,refreshToken:t.jwtRefresh,displayName:t.displayName}),d.isLoggedIn?g.uiMgr.preLoadLayerAsync(f.Home).then((function(){g.uiMgr.goLayerAsync(f.Home)})):(g.localMgr.removeItem("token"),g.localMgr.removeItem("username"),g.localMgr.removeItem("password"),w.showToast("Xác thực tài khoản thất bại"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.start=function(){},u.onBtnClick=function(e,t){switch(t){case"login":var n=this.usernameInput.string,r=this.passwordInput.string;this.handleLoginRequest(n,r)}},t}(p)).prototype,"usernameInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(L.prototype,"passwordInput",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));u._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/KKUtils.ts",["cc","./KKGameUIConf.ts","./kk.ts"],(function(o){var n,t,e,i,u;return{setters:[function(o){n=o.cclegacy,t=o.v3},function(o){e=o.KKCommonPopupConf,i=o.KKCommonWidgetConf},function(o){u=o.default}],execute:function(){n._RF.push({},"5eecdz1G6BN8ryn48pHUkhk","KKUtils",void 0),o("default",function(){function o(){}return o.showCommonPopup=function(o){return u.uiMgr.showPopupAsync(e.DialogPopup,o)},o.showToast=function(o){u.uiMgr.createWidgetAsync(i.Toast,{msg:o}).then((function(o){u.godNode.children.forEach((function(o,n){o.name==i.Toast.name&&(o.position=t(o.position.x,o.position.y+110,o.position.z))})),o.parent=u.godNode}))},o.showLoading=function(o){var n=this;this._loadingCounter++;var t,e=this._loadingCounter;o?u.uiMgr.createWidgetAsync(i.Loading).then((function(o){n._loadingCounter===e?o.parent=u.godNode:o.destroy()})):null==(t=u.godNode.getChildByName(i.Loading.name))||t.destroy()},o}())._loadingCounter=0,n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/LayerBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){var t,r,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator},function(e){s=e.UIBase}],execute:function(){var a;r._RF.push({},"a7388/HzEVFtq5K31XcR06N","LayerBase",void 0);var c=n.ccclass;e("LayerBase",c("LayerBase")(a=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.refresh=function(){},r}(s))||a);r._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/LocalizationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts"],(function(e){var t,n,a,r,i,o;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,r=e.resources,i=e.JsonAsset},function(e){o=e.default}],execute:function(){a._RF.push({},"a907ctOFLBHW4DfGMwIbFWq","LocalizationManager",void 0);e("LocalizationManager",function(){function e(){this.currentLang="vi",this.langData={},this.labels=[]}var a=e.prototype;return a.loadLanguage=function(){var e=t(n().mark((function e(t){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),o.localMgr.setItem("selectedLang",""+t),e.prev=2,e.next=5,new Promise((function(e,n){r.load("lang/"+t,i,(function(t,a){t?n(t):e(a)}))}));case 5:a=e.sent,this.currentLang=t,this.langData=a.json,this.updateAllLabels(),o.eventMgr.emit("language-changed"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Failed to load language file:",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),a.registerLabel=function(e){this.labels.push(e)},a.unregisterLabel=function(e){this.labels=this.labels.filter((function(t){return t!==e}))},a.updateAllLabels=function(){this.labels.forEach((function(e){return e.updateText()}))},a.getText=function(e,t){var n=this.langData[e]||e;return t&&t.forEach((function(e,t){n=n.replace("{"+t+"}",e.toString())})),n},a.detectLanguage=function(){var e=o.localMgr.getItemWithDefault("selectedLang","vi"),t=navigator.language.split("-")[0];return e||t||"vi"},e}());a._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/LocalManager.ts",["cc","./Xor.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.cclegacy,r=t.sys},function(t){n=t.default}],execute:function(){e._RF.push({},"554fbebH89LW4XG8/1aIDS9","LocalManager",void 0);var a="any string";t("default",function(){function t(){}var e=t.prototype;return e.safeParse=function(t){try{return JSON.parse(t)}catch(t){return null}},e.getItem=function(t,e){void 0===e&&(e=!1);var o=r.localStorage.getItem(t);return null==o?null:(e&&(o=n.xor(o,a)),this.safeParse(o))},e.getItemWithDefault=function(t,e,o){void 0===o&&(o=!1);var u=r.localStorage.getItem(t);if(null==u)return this.setItem(t,e,o),e;o&&(u=n.xor(u,a));var l=this.safeParse(u);return null===l?(this.setItem(t,e,o),e):l},e.setItem=function(t,e,o){void 0===o&&(o=!1);var u=JSON.stringify(e);o&&(u=n.xor(u,a)),r.localStorage.setItem(t,u)},e.removeItem=function(t){r.localStorage.removeItem(t)},t}());e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/PopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./kk.ts"],(function(t){var e,n,o,i,s,a,c,r,l,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Widget,s=t.tween,a=t.v3,c=t.UIOpacity,r=t.Node,l=t.UITransform},function(t){u=t.UIBase},function(t){h=t.default}],execute:function(){var p;n._RF.push({},"82c96ZMl6RGy6W5Cg3SRgHF","PopupBase",void 0);var d=o.ccclass;t("PopupBase",d("PopupBase")(p=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).ret=void 0,e.onDestroyCall=function(){},e}e(n,t);var o=n.prototype;return o.onDestroy=function(){h.uiMgr._autoRemovePopup(this.node.parent),this.onDestroyCall(this.ret),t.prototype.onDestroy.call(this)},o.close=function(){this.closeAnim()},o.showAnim=function(){this.node.getComponent(i).updateAlignment(),this.node.setScale(0,0,1),s(this.node).to(.2,{scale:a(1,1,1)},{easing:"backOut"}).start()},o.closeAnim=function(){var t=this;s(this.node).to(.2,{scale:a(0,0,1)},{easing:"backIn"}).call((function(){t.node.destroy()})).start()},o.setDarkBgOpacity=function(t){this.node.parent.getChildByName("dark").getComponent(c).opacity=t},o.enableClickBlankToClose=function(t){var e=this;(!t||0==t.length)&&this.node.children.length>0&&(t=[this.node.children[0]]),this.node.on(r.EventType.TOUCH_END,(function(n){var o=n.getUIStartLocation(),i=n.getUILocation().subtract(o);if(Math.abs(i.x)<15&&Math.abs(i.y)<15){for(var s=!0,a=0;a<t.length;++a)if(t[a].getComponent(l).getBoundingBoxToWorld().contains(o)){s=!1;break}s&&e.close()}}),this)},n}(u))||p);n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/RandomTextUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"ec43emvQ8ZI7azPKhtiLVG9","RandomTextUtil",void 0);t("RandomTextUtil",function(){function t(){}return t.radomText=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomNumber=function(t){for(var r="",n="0123456789",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextNumber=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextNumberSpecial=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextSpecial=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t}());r._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function n(){return(n=t("extends",Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t})).apply(this,arguments)}function o(e,r){return(o=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t){var e=u(t,"string");return"symbol"==typeof e?e:String(e)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},arrayLikeToArray:a,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},createForOfIteratorHelperLoose:function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},extends:n,inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return r}));var e,r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),u=new k(n||[]);return i(a,"_invoke",{value:P(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function b(){}function m(){}var w={};f(w,u,(function(){return this}));var O=Object.getPrototypeOf,L=O&&O(O(A([])));L&&L!==n&&o.call(L,u)&&(w=L);var j=m.prototype=g.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(n,i,a,u){var c=h(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function P(t,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=_(u,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,r,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function _(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=m,i(j,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:b,configurable:!0}),b.displayName=f(m,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},x(E.prototype),f(E.prototype,c,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(j),f(j,l,"Generator"),f(j,u,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},r},setPrototypeOf:o,toPrimitive:u,toPropertyKey:c,unsupportedIterableToArray:i})}}}));

System.register("bundle://KKAuthBundle/_virtual/SkinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KKGameUIConf.ts"],(function(n){var t,e,i,s,r,o,u,a;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime,i=n.createForOfIteratorHelperLoose},function(n){s=n.cclegacy,r=n.log,o=n.SpriteFrame,u=n.assetManager},function(n){a=n.KKBundleConf}],execute:function(){s._RF.push({},"49c1c4Pxb9HfYkiUN1W1zQ4","SkinManager",void 0);var c=n("GameType",function(n){return n[n.COTUONG=0]="COTUONG",n}({})),h=(n("SkinGameManager",function(){function n(){this.skins=new Map;var n=new h("1002",a.CoTuong,["1000","1001","1002"],c.COTUONG);this.skins.set(c.COTUONG,n)}var t=n.prototype;return t.getSkinManager=function(n){return this.skins.get(n)},t.setCurrentSkin=function(n,t,e){void 0===e&&(e=!1);var i=this.getSkinManager(n);i?e?i.resetToDefaultSkin():i.setCurrentSkin(t):console.warn("Không tìm thấy SkinManager cho gameType "+n)},n}()),function(){function n(n,t,e,i){this.currentSkin=void 0,this.defaultSkin=void 0,this.skinIds=void 0,this.bundle=void 0,this.skins=new Map,this.type=void 0,this.defaultSkin=n,this.bundle=t,this.skinIds=e,this.currentSkin=n,this.type=i}var s=n.prototype;return s.loadDirAssets=function(n,t,e){return new Promise((function(i,s){n.loadDir(t,e,(function(n,t,e){}),(function(n,t){n?s(n):i(t)}))}))},s.loadAllSkinAssets=function(){var n=t(e().mark((function n(){var t,s,a,h,k,l,f,d,g;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=u.getBundle(this.bundle)){n.next=4;break}return console.error("Không tìm thấy bundle '"+this.bundle+"'!"),n.abrupt("return");case 4:if(this.type!=c.COTUONG){n.next=29;break}s=i(this.skinIds);case 6:if((a=s()).done){n.next=29;break}return h=a.value,k="Textures/skins/"+h+"/red",l="Textures/skins/"+h+"/black",n.prev=10,n.next=13,this.loadDirAssets(t,k,o);case 13:return f=n.sent,n.next=16,this.loadDirAssets(t,l,o);case 16:if(d=n.sent,8===f.length&&8===d.length){n.next=19;break}throw new Error("Skin "+h+" không đủ 8 sprite cho mỗi màu");case 19:g={red:f,black:d,other:[]},this.skins.set(h,g),r("Đã load skin "+c[this.type]+" '"+h+"' thành công."),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(10),console.error("Lỗi khi load skin assets cho skinId "+h+":",n.t0);case 27:n.next=6;break;case 29:case"end":return n.stop()}}),n,this,[[10,24]])})));return function(){return n.apply(this,arguments)}}(),s.getCurrentSkin=function(){return this.skins.get(this.currentSkin)},s.getAssetsBySkinId=function(n,t){return this.getCurrentSkin()[n].find((function(n){return n.name===t}))},s.setCurrentSkin=function(n){this.skins.has(n)?(this.currentSkin=n,r("Đã chuyển skin hiện tại sang: "+n)):console.warn("Skin '"+n+"' không tồn tại!")},s.resetToDefaultSkin=function(){this.currentSkin=this.defaultSkin,r("Reset skin về mặc định: "+this.defaultSkin)},s.getListSkin=function(){console.log(this.skins)},n}());s._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/SocketManager.ts",["cc","./BaseSocket.ts"],(function(t){var e,s,o,c;return{setters:[function(t){e=t.cclegacy,s=t.warn},function(t){o=t.BaseSocket,c=t.SocketErrCode}],execute:function(){e._RF.push({},"489c5+jG5ZFhLK9D9DA7tR7","SocketManager",void 0);t("default",function(){function t(){this._sockets={}}var e=t.prototype;return e.connectAsync=function(t,e,s){var c=this;return void 0===s&&(s=0),new Promise((function(n,i){c._sockets[s]||(c._sockets[s]=new o),c._sockets[s].connectAsync(t,e).then(n).catch(i)}))},e.close=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=0),this._sockets[e]&&(this._sockets[e].close(t),t&&delete this._sockets[e])},e.reqAsync=function(t,e,o,n){var i=this;return void 0===o&&(o=!1),void 0===n&&(n=0),new Promise((function(r,u){i._sockets[n]?i._sockets[n].reqAsync(t,e,o).then(r).catch(u):(s("This ws does not exist!"),u(c.NoThisSocket))}))},e.on=function(t,e,s,o){void 0===o&&(o=0),this._sockets[o]&&this._sockets[o].on(t,e,s)},e.off=function(t,e,s,o){void 0===o&&(o=0),this._sockets[o]&&this._sockets[o].off(t,e,s)},t}());e._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/SoundManager.ts",["cc"],(function(t){var i,u,e,s,o;return{setters:[function(t){i=t.cclegacy,u=t.assetManager,e=t.warn,s=t.Node,o=t.AudioSource}],execute:function(){i._RF.push({},"cdc1829IlZKh6mOJsAkLqB5","SoundManager",void 0);t("default",function(){function t(){this._bundle="",this._path="",this._musicVolume=1,this._effectVolume=1,this._isMusicMute=!1,this._isEffectMute=!1,this._musicAudio=null,this._effectsMap=new Map,this._audioID=0}var i=t.prototype;return i.init=function(t,i){this._bundle=t,this._path=i},i.playMusicAsync=function(t,i,c){var n=this;return void 0===c&&(c=!0),new Promise((function(f,a){var d=u.getBundle(i||n._bundle);if(!d)return e("Bundle not found!"),void a();d.load(n._path+t,(function(t,i){if(t)return e(t),void a();n.stopMusic();var u=new s;n._musicAudio=u.addComponent(o),n._musicAudio.clip=i,n._musicAudio.volume=n._musicVolume*(n._isMusicMute?0:1),n._musicAudio.loop=c,n._musicAudio.play(),c?f():u.on(o.EventType.ENDED,f)}))}))},i.stopMusic=function(){this._musicAudio&&(this._clearAudio(this._musicAudio),this._musicAudio=null)},i.pauseMusic=function(){if(this._musicAudio){if(this._musicAudio.state==o.AudioState.PAUSED)return;this._musicAudio.pause()}},i.resumeMusic=function(){if(this._musicAudio){if(this._musicAudio.state!=o.AudioState.PAUSED)return;this._musicAudio.play()}},i.isMusicPlaying=function(){return!!this._musicAudio&&this._musicAudio.playing},i.playEffectAsync=function(t,i,c){var n=this;return void 0===c&&(c=!1),new Promise((function(f,a){var d=u.getBundle(i||n._bundle);if(!d)return e("Bundle not found!"),void a();d.load(n._path+t,(function(t,i){if(t)return e(t),void a();var u=new s,d=u.addComponent(o);d.clip=i,d.volume=n._effectVolume*(n._isEffectMute?0:1),d.loop=c,d.play(),n._audioID+=1;var _=n._audioID;n._effectsMap.set(_,d),c||u.on(o.EventType.ENDED,(function(){n.stopEffect(_)})),f(_)}))}))},i.stopEffect=function(t){var i=this._effectsMap.get(t);i&&(this._clearAudio(i),this._effectsMap.delete(t))},i.stopAllEffects=function(){var t=this;this._effectsMap.forEach((function(i,u){t._clearAudio(i)})),this._effectsMap.clear()},i.stopAll=function(){this.stopMusic(),this.stopAllEffects()},i.pauseEffect=function(t){var i=this._effectsMap.get(t);if(i){if(i.state==o.AudioState.PAUSED)return;i.pause()}},i.resumeEffect=function(t){var i=this._effectsMap.get(t);if(i){if(i.state!=o.AudioState.PAUSED)return;i.play()}},i.setMusicVolume=function(t){this._musicVolume=t,this._musicAudio&&(this._musicAudio.volume=t*(this._isMusicMute?0:1))},i.setEffectsVolume=function(t){var i=this;this._effectVolume=t,this._effectsMap.forEach((function(u,e){u.volume=t*(i._isEffectMute?0:1)}))},i.setMute=function(t){this.setMusicMute(t),this.setEffectMute(t)},i.setMusicMute=function(t){t!=this._isMusicMute&&(this._isMusicMute=t,this.setMusicVolume(this._musicVolume))},i.setEffectMute=function(t){t!=this._isEffectMute&&(this._isEffectMute=t,this.setEffectsVolume(this._effectVolume))},i._clearAudio=function(t){t.node.off(o.EventType.ENDED),t.stop(),t.clip=null,t.node.destroy()},t}());i._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/TimeHelper.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d405cKVB+VLyJ44LBTBHwRg","TimeHelper",void 0);e("default",function(){function e(){}return e.getCurFullDate=function(e,t){void 0===t&&(t="/");var n="",r=e?new Date(e):new Date;n+=r.getFullYear()+t;var u=r.getMonth()+1;n+=u<10?"0"+u:u,n+=t;var a=r.getDate();return n+=a<10?"0"+a:a},e.getCurDate=function(e,t){void 0===t&&(t="/");var n="",r=e?new Date(e):new Date,u=r.getMonth()+1;n+=u<10?"0"+u:u,n+=t;var a=r.getDate();return n+=a<10?"0"+a:a},e.getDayOfMonth=function(e){return(e?new Date(e):new Date).getDate()},e.getCurDetailTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()+t+n.getSeconds()+t+n.getMilliseconds()},e.getCurNormalTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()+t+n.getSeconds()},e.getCurShortTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()},e.getTimeStamp=function(){return Date.now()},e}());t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.warn,s=e.Component}],execute:function(){var i;n._RF.push({},"20f52nE8qZBebODYeB7lFTm","UIBase",void 0);var c=r.ccclass;r.property,e("UIBase",c("UIBase")(i=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).refAssets=[],t.recvData=void 0,t}t(n,e);var r=n.prototype;return r.onBtnClick=function(e,t){},r.onDestroy=function(){this.refAssets.forEach((function(e,t){e.decRef()})),this.refAssets=null},r.getObj=function(e,t,n){var r,s,i;"string"==typeof e?(r=this.node,s=e,i=t):(r=e,s=t,i=n);for(var c=s.split("."),a=0;a<c.length;++a)if(!(r=r.getChildByName(c[a])))return c.length>1&&o("Child is NULL!",c[a]),null;return i?r.getComponent(i):r},n}(s))||i);n._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/UIConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"234edNDZPJMfqZX3vbxtXKO","UIConfig",void 0);e("UICacheMode",{NoCache:0,Cache:1,Stay:2}),e("LAYER_PATH","Prefabs/Layer/"),e("POPUP_PATH","Prefabs/Popup/"),e("PANEL_PATH","Prefabs/Panel/"),e("WIDGET_PATH","Prefabs/Widget/");t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts","./UIConfig.ts","./UIBase.ts","./AsyncHelper.ts","./CocosHelper.ts"],(function(e){var n,r,t,a,o,u,c,s,i,d,p,f,g,l,y,m,h,C,v,b;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,a=e.Node,o=e.UITransform,u=e.BlockInputEvents,c=e.Prefab,s=e.assetManager,i=e.Sprite,d=e.UIOpacity,p=e.instantiate},function(e){f=e.default},function(e){g=e.UICacheMode,l=e.LAYER_PATH,y=e.POPUP_PATH,m=e.PANEL_PATH,h=e.WIDGET_PATH},function(e){C=e.UIBase},function(e){v=e.default},function(e){b=e.default}],execute:function(){t._RF.push({},"c8d38n/KhpOWo+93AqiABif","UIManager",void 0);e("default",function(){function e(){this._curLayerConf=void 0,this.pureBanFrm=null}var t=e.prototype;return t.getCurLayerConf=function(){return this._curLayerConf},t.getCurLayer=function(){return f.godNode.getChildByName(this._curLayerConf.name)},t.goLayerAsync=function(){var e=n(r().mark((function e(n,t){var a,o,u,c,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=(a=this)._curLayerConf)||o.name!==n.name){e.next=5;break}return a.resetCurLayerAsync(t),e.abrupt("return");case 5:if(a._curLayerConf=n,n.cacheMode!=g.Stay){e.next=17;break}if(!(u=f.godNode.getChildByName(n.name))){e.next=17;break}return u.active=!0,c=n.script?n.script:n.name,(s=u.getComponent(c)).recvData=t,s.refresh(),f.debugMgr.log("show Layer",n.name),a._clearLayer(o),e.abrupt("return");case 17:return e.next=19,a._genUIBaseAsync(n,l,t);case 19:e.sent.parent=f.godNode,f.debugMgr.log("create Layer",n.name),a._clearLayer(o);case 23:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.resetCurLayerAsync=function(){var e=n(r().mark((function e(n){var t,a,o,u,c,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=(t=this)._curLayerConf)){e.next=20;break}if(a.cacheMode!=g.Stay){e.next=12;break}o=f.godNode.getChildByName(a.name),u=a.script?a.script:a.name,(c=o.getComponent(u)).recvData=n,c.refresh(),f.debugMgr.log("refresh Layer",a.name),e.next=20;break;case 12:return(s=f.godNode.getChildByName(a.name)).name="removed",e.next=16,t._genUIBaseAsync(a,l,n);case 16:e.sent.parent=f.godNode,s.destroy(),f.debugMgr.log("reset Layer",a.name);case 20:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t.preLoadLayerAsync=function(){var e=n(r().mark((function e(n,t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.getBundle(n.bundle)){e.next=5;break}return e.next=4,v.loadBundleAsync(n.bundle);case 4:a=e.sent;case 5:return e.next=7,v.preloadAsync(a,l+n.name,c,t);case 7:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),t._clearLayer=function(e){if(e){var n=f.godNode.getChildByName(e.name);e.cacheMode==g.Stay?(n.active=!1,f.debugMgr.log("hide Layer",e.name)):(n.destroy(),f.debugMgr.log("destroy Layer",e.name))}},t.showPopupAsync=function(){var e=n(r().mark((function e(n,t){var o,c,s,p,g,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,c=new a(n.name),o.getCurLayer().addChild(c),c.addComponent(u),b.addWidget(c,{left:0,right:0,top:0,bottom:0}),s=new a("dark"),o.pureBanFrm||(o.pureBanFrm=b.genPureColorSpriteFrame(),o.pureBanFrm.addRef()),s.addComponent(i).spriteFrame=o.pureBanFrm,s.addComponent(d).opacity=180,s.parent=c,b.addWidget(s,{left:0,right:0,top:0,bottom:0}),e.next=13,o._genUIBaseAsync(n,y,t);case 13:return p=e.sent,g=n.script?n.script:n.name,l=p.getComponent(g),p.parent=c,null==l||l.showAnim(),f.debugMgr.log("show Popup",n.name),e.abrupt("return",new Promise((function(e,n){l.onDestroyCall=e})));case 20:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.getPopup=function(e,n){void 0===n&&(n=null),n||(n=this._curLayerConf);var r=f.godNode.getChildByName(n.name);return r?r.getChildByName(e.name):null},t.closeAllPopup=function(){var e=f.godNode.getChildByName(this._curLayerConf.name);e&&e.children.forEach((function(e,n){e.name.endsWith("Popup")&&e.destroy()}))},t._autoRemovePopup=function(e){null==e||e.destroy(),f.debugMgr.log("close Popup",e.name)},t.createPanelAsync=function(){var e=n(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._genUIBaseAsync(n,m,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.createWidgetAsync=function(){var e=n(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createWidgetAsync",n,t),e.next=3,this._genUIBaseAsync(n,h,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t._genUIBaseAsync=function(){var e=n(r().mark((function e(n,t,a){var o,u,i,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.getBundle(n.bundle)){e.next=5;break}return e.next=4,v.loadBundleAsync(n.bundle);case 4:o=e.sent;case 5:return e.next=7,v.loadAsync(o,t+n.name,c);case 7:return u=e.sent,i=p(u),d=n.script?n.script:n.name,(f=i.getComponent(d))||(f=i.addComponent(C)),f.recvData=a,n.cacheMode==g.Cache?0==u.refCount&&u.addRef():(u.addRef(),f.refAssets.push(u)),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),t.banTouch=function(){if(!f.godNode.getChildByName("_ban")){var e=new a("_ban");e.addComponent(o).setContentSize(f.godNode.getComponent(o).contentSize),f.godNode.addChild(e),e.addComponent(u)}},t.unbanTouch=function(){var e=f.godNode.getChildByName("_ban");e&&e.destroy()},e}());t._RF.pop()}}}));

System.register("bundle://KKAuthBundle/_virtual/Xor.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"11948OXRWxFSb/uOlkSXeMT","Xor",void 0);r("default",function(){function r(){}return r.xor=function(r,t){try{if(!r||!t)return"";for(var e=0,n=t.length-1;n>=0;--n)e+=t.charCodeAt(n);for(var u="",o=r.length-1;o>=0;--o){var c=r.charCodeAt(o)^e;u+=String.fromCharCode(c)}return u}catch(r){return""}},r}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/KKAuthBundle', 'bundle://KKAuthBundle/_virtual/KKAuthBundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});