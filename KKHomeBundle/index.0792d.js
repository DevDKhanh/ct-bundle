System.register("bundle://KKHomeBundle/_virtual/AsyncHelper.ts",["cc","./CocosHelper.ts"],(function(n){var e,t,o,u,c,r;return{setters:[function(n){e=n.cclegacy,t=n.assetManager,o=n.Canvas,u=n.tween,c=n.log},function(n){r=n.default}],execute:function(){e._RF.push({},"73bdcxxabFLx7t0M0O310uD","AsyncHelper",void 0);n("default",function(){function n(){}return n.sleepAsync=function(n,e){return new Promise((function(t,u){e||(e=r.getRoot().getComponent(o)),e.scheduleOnce((function(){t(null)}),n)}))},n.tweenAsync=function(n,e){return new Promise((function(t){u(n).then(e).call(t).start()}))},n.loadBundleAsync=function(n){return new Promise((function(e,o){t.loadBundle(n,(function(t,u){c("load bundle",n),t?o(t):e(u)}))}))},n.preloadAsync=function(n,e,t,o){return new Promise((function(u,c){n.preload(e,t,(function(n,e,t){o&&o(n,e)}),(function(n,e){n?c(n):u()}))}))},n.preloadDirAsync=function(n,e,t){return new Promise((function(o,u){n.preloadDir(e,(function(n,e,o){t&&t(n,e)}),(function(n,e){n?u(n):o()}))}))},n.loadDirAsync=function(n,e,t){return new Promise((function(o,u){n.loadDir(e,(function(n,e,o){t&&t(n,e)}),(function(n,e){n?u(n):o()}))}))},n.loadAsync=function(n,e,t,o){return new Promise((function(u,c){n.load(e,t,(function(n,e,t){o&&o(n,e)}),(function(n,e){n?c(n):u(e)}))}))},n.prototype.get=function(n,e,o){return void 0===o&&(o="resources"),t.getBundle(o).get(n,e)},n.execPerFrameAsync=function(n,e,t){return t||(t=r.getRoot().getComponent(o)),new Promise((function(o,u){!function u(){for(var c=Date.now(),r=n.next();;r=n.next()){if(!r||r.done)return void o();if(Date.now()-c>e)return void t.scheduleOnce((function(){u()}))}}()}))},n}());e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/BaseSocket.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,s,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.warn,s=t.log,i=t.error}],execute:function(){n._RF.push({},"ac152Scz+pBFJutqPd0SBev","BaseSocket",void 0);var c=t("SocketErrCode",{NoThisSocket:100,SendFailure:101});t("BaseSocket",function(){function t(){this._ws=null,this._connectOptions=null,this._heartTimer=null,this._curHeartOutCnt=0,this._curAutoReconnect=0,this._reconnectTimer=0,this._req2respCallbacks={},this._server2ClientListeners={},this._connectedCB=null}var n=t.prototype;return n.connectAsync=function(t,e){var n=this;null==this._connectOptions&&(this._connectOptions={url:t.url?t.url:(t.protocol?t.protocol:"ws")+"://"+t.ip+":"+t.port,binaryType:t.binaryType?t.binaryType:"arraybuffer",autoReconnect:t.autoReconnect?t.autoReconnect:0,reconnectTime:t.reconnectTime?t.reconnectTime:6,heartTime:t.heartTime?t.heartTime:3,heartOutCount:t.heartOutCount?t.heartOutCount:3,getHeartbeat:t.getHeartbeat?t.getHeartbeat:function(){return""},parseNetData:t.parseNetData?t.parseNetData:function(t){return{cmd:0,content:t}},tips:t.tips?t.tips:{},manualReconnect:t.manualReconnect?t.manualReconnect:function(){return o("manualReconnect undefined")}},this._connectedCB=e||function(){});var i=!0;return new Promise((function(t,e){var o;if(n._ws){if(n._ws.readyState===WebSocket.CONNECTING)return s("ws connecting, wait for a moment..."),void t();if(n._ws.readyState===WebSocket.OPEN)return s("ws has connected!"),void t()}s("net is connecting!"),null==(o=n._connectOptions.tips)||o.showConnecting(!0),n._ws=new WebSocket(n._connectOptions.url),n._ws.binaryType=n._connectOptions.binaryType,n._ws.onopen=function(e){var o;i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),t(),n._connectedCB(),n._onOpen(e)},n._ws.onmessage=function(t){n._onMessage(t.data)},n._ws.onerror=function(t){var o;i&&(i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),e(t));n._onError(t)},n._ws.onclose=function(t){var o;i&&(i=!1,null==(o=n._connectOptions.tips)||o.showConnecting(!1),e(t));n._onClose(t)}}))},n.reqAsync=function(t,e,n){var o,s=this;return void 0===n&&(n=!1),n&&(null==(o=this._connectOptions.tips)||o.showRequesting(!0)),new Promise((function(o,i){var r;if(!s._send(e))return n&&(null==(r=s._connectOptions.tips)||r.showRequesting(!1)),void i(c.SendFailure);s._req2respCallbacks[t]||(s._req2respCallbacks[t]=[]),s._req2respCallbacks[t].push((function(t){var e;n&&(null==(e=s._connectOptions.tips)||e.showRequesting(!1)),o(t)}))}))},n.close=function(t){if(void 0===t&&(t=!1),this._stopHeartTimer(),this._stopReconnectTimer(),this._ws){var e;if(this._ws.readyState==WebSocket.CONNECTING||this._ws.readyState==WebSocket.CLOSING)null==(e=this._connectOptions.tips)||e.showConnecting(!1);this._clearReqList(),t&&(this._server2ClientListeners={}),this._ws.onopen=function(t){},this._ws.onmessage=function(t){},this._ws.onerror=function(t){},this._ws.onclose=function(t){},this._ws.readyState!=WebSocket.CLOSED&&this._ws.close(),s("ws closed manually")}},n.on=function(t,e,n){this._server2ClientListeners[t]||(this._server2ClientListeners[t]=[]),-1===this._server2ClientListeners[t].findIndex((function(t){return t.target===n&&t.callback===e}))&&this._server2ClientListeners[t].push({target:n,callback:e})},n.off=function(t,e,n){var o=this._server2ClientListeners[t];if(o){var s=o.findIndex((function(t){return t.target===n&&t.callback===e}));-1!==s&&o.splice(s,1)}},n._onOpen=function(t){s("ws connected!"),this._stopReconnectTimer(),this._startHeartTimer()},n._onMessage=function(t){this._curHeartOutCnt=0,t&&this._onRecv(t)},n._onError=function(t){i("ws error!",t)},n._onClose=function(t){s("ws closed!",t.code,t.reason),this._stopHeartTimer(),this._stopReconnectTimer(),this._clearReqList(),this._doReconnect()},n._send=function(t){return this._ws&&this._ws.readyState===WebSocket.OPEN?(this._ws.send(t),!0):(o("send exceptionally"),!1)},n._clearReqList=function(){for(var t in this._req2respCallbacks){this._req2respCallbacks[t].forEach((function(t,e){t(null)}))}this._req2respCallbacks={}},n._onRecv=function(t){var n=this._connectOptions.parseNetData(t);if(n){var s=this._req2respCallbacks[n.cmd];if(s&&s.length>0)s.shift()(n.content);var i=this._server2ClientListeners[n.cmd];if(i)for(var c,r=e(i);!(c=r()).done;){var a=c.value;a.callback.call(a.target,n.content)}}else o("ParseNetData Error! ",t)},n._doReconnect=function(){var t,e,n=this,o=this._connectOptions.autoReconnect;0==o||o>0&&this._curAutoReconnect>=o?null==(t=this._connectOptions)||t.manualReconnect():(o>0&&++this._curAutoReconnect,s("net is reconnecting!"),null==(e=this._connectOptions.tips)||e.showReconnecting(!0),this._reconnectTimer=setTimeout((function(){var t;null==(t=n._connectOptions.tips)||t.showReconnecting(!1),n.connectAsync(n._connectOptions,n._connectedCB)}),1e3*this._connectOptions.reconnectTime))},n._startHeartTimer=function(){var t=this;this._curHeartOutCnt=0,this._stopHeartTimer(),this._heartTimer=setInterval((function(){if(++t._curHeartOutCnt,t._curHeartOutCnt>t._connectOptions.heartOutCount)return s("ws disconnected! -- heart out"),t.close(),void t._doReconnect();t._send(t._connectOptions.getHeartbeat())}),1e3*this._connectOptions.heartTime)},n._stopHeartTimer=function(){this._heartTimer&&clearInterval(this._heartTimer),this._heartTimer=null},n._stopReconnectTimer=function(){this._reconnectTimer&&clearTimeout(this._reconnectTimer),this._reconnectTimer=null},t}());n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/cjs-loader.mjs",[],(function(e){return{execute:function(){e("default",new(function(){function e(){this._registry={},this._moduleCache={}}var r=e.prototype;return r.define=function(e,r,t){this._registry[e]={factory:r,resolveMap:t}},r.require=function(e){return this._require(e)},r.throwInvalidWrapper=function(e,r){throw new Error("Module '"+e+"' imported from '"+r+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},r._require=function(e,r){var t=this._moduleCache[e];if(t)return t.exports;var o={id:e,exports:{}};return this._moduleCache[e]=o,this._tryModuleLoad(o,e),o.exports},r._resolve=function(e,r){return this._resolveFromInfos(e,r)||this._throwUnresolved(e,r)},r._resolveFromInfos=function(e,r){var t,o;return e in cjsInfos?e:r&&null!=(t=null==(o=cjsInfos[r])?void 0:o.resolveCache[e])?t:void 0},r._tryModuleLoad=function(e,r){var t=!0;try{this._load(e,r),t=!1}finally{t&&delete this._moduleCache[r]}},r._load=function(e,r){var t=this._loadWrapper(r),o=t.factory,n=t.resolveMap,i=this._createRequire(e),u=n?this._createRequireWithResolveMap("function"==typeof n?n():n,i):i;o(e.exports,u,e)},r._loadWrapper=function(e){return e in this._registry?this._registry[e]:this._loadHostProvidedModules(e)},r._loadHostProvidedModules=function(e){return{factory:function(r,t,o){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+e+"'.");try{o.exports=require(e)}catch(r){throw new Error("Exception thrown when calling host defined require('"+e+"').",{cause:r})}}}},r._createRequire=function(e){var r=this;return function(t){return r._require(t,e)}},r._createRequireWithResolveMap=function(e,r){return function(t){var o=e[t];if(o)return r(o);throw new Error("Unresolved specifier "+t)}},r._throwUnresolved=function(e,r){throw new Error("Unable to resolve "+e+" from "+parent+".")},e}()))}}}));

System.register("bundle://KKHomeBundle/_virtual/CocosHelper.ts",["cc","./kk.ts"],(function(e){var t,i,n,o,r,a,d,p,l,c,g,f,u;return{setters:[function(e){t=e.cclegacy,i=e.director,n=e.Sprite,o=e.Color,r=e.Label,a=e.Widget,d=e.Layout,p=e.UITransform,l=e.builtinResMgr,c=e.ImageAsset,g=e.Texture2D,f=e.SpriteFrame},function(e){u=e.default}],execute:function(){e("getRankByElo",(function(e){return u.config.service.configLevel.find((function(t){var i,n=t.type;if(i=/^elo<(\d+)$/.exec(n)){var o=+i[1];return e<o}if(i=/^elo>=(\d+)$/.exec(n)){var r=+i[1];return e>=r}if(i=/^(\d+)>elo>=(\d+)$/.exec(n)){var a=+i[1],d=+i[2];return e>=d&&e<a}return!1}))||null})),t._RF.push({},"1d4c6haefZJ0JyHbpV5WuLI","CocosHelper",void 0);e("default",function(){function e(){}return e.getRoot=function(){return i.getScene().getChildByName("Canvas")},e.addSprite=function(e,t){if(e){"number"!=typeof t.type&&(t.type=n.Type.SIMPLE),"number"!=typeof t.sizeMode&&(t.sizeMode=n.SizeMode.TRIMMED),"boolean"!=typeof t.trim&&(t.trim=!0);var i=e.addComponent(n);return i.spriteFrame=t.spriteFrame,i.type=t.type,i.sizeMode=t.sizeMode,i.trim=t.trim,i}},e.addLabel=function(e,t){if(e){t.fontSize||(t.fontSize=40),t.color||(t.color=o.WHITE),t.lineHeight||(t.lineHeight=t.fontSize),"number"!=typeof t.horizontalAlign&&(t.horizontalAlign=r.HorizontalAlign.CENTER),"number"!=typeof t.verticalAlign&&(t.verticalAlign=r.VerticalAlign.CENTER),"number"!=typeof t.overflow&&(t.overflow=r.Overflow.NONE),"number"!=typeof t.cacheMode&&(t.cacheMode=r.CacheMode.NONE);var i=e.addComponent(r);return i.string=t.string,i.fontSize=t.fontSize,i.lineHeight=t.lineHeight,i.horizontalAlign=t.horizontalAlign,i.verticalAlign=t.verticalAlign,i.overflow=t.overflow,i.isBold=!!t.enableBold,i.isItalic=!!t.enableItalic,i.isUnderline=!!t.enableUnderline,i.enableWrapText=!!t.enableWrapText,i.cacheMode=t.cacheMode,i.color=t.color,i}},e.addWidget=function(e,t){if(e){var i=e.addComponent(a);return"number"==typeof t.left&&(i.isAlignLeft=!0,i.left=t.left),"number"==typeof t.right&&(i.isAlignRight=!0,i.right=t.right),"number"==typeof t.top&&(i.isAlignTop=!0,i.top=t.top),"number"==typeof t.bottom&&(i.isAlignBottom=!0,i.bottom=t.bottom),i}},e.addLayout=function(e,t){if(e){"number"!=typeof t.resizeMode&&(t.resizeMode=d.ResizeMode.CONTAINER);var i=e.getComponent(p);i||e.addComponent(p),t.width&&(i.width=t.width),t.height&&(i.height=t.height);var n=e.addComponent(d);return n.type=t.type,n.resizeMode=t.resizeMode,n.affectedByScale=!!t.affectedByScale,n.type==d.Type.HORIZONTAL?(n.horizontalDirection="number"==typeof t.horizontalDirection?t.horizontalDirection:d.HorizontalDirection.LEFT_TO_RIGHT,n.spacingX=t.spacingX?t.spacingX:0,n.paddingLeft=t.paddingLeft?t.paddingLeft:0,n.paddingRight=t.paddingRight?t.paddingRight:0):n.type==d.Type.VERTICAL?(n.verticalDirection="number"==typeof t.verticalDirection?t.verticalDirection:d.VerticalDirection.TOP_TO_BOTTOM,n.spacingY=t.spacingY?t.spacingY:0,n.paddingTop=t.paddingTop?t.paddingTop:0,n.paddingBottom=t.paddingBottom?t.paddingBottom:0):n.type==d.Type.GRID&&(n.startAxis="number"==typeof t.startAxis?t.startAxis:d.AxisDirection.HORIZONTAL,n.horizontalDirection="number"==typeof t.horizontalDirection?t.horizontalDirection:d.HorizontalDirection.LEFT_TO_RIGHT,n.verticalDirection="number"==typeof t.verticalDirection?t.verticalDirection:d.VerticalDirection.TOP_TO_BOTTOM,n.spacingX=t.spacingX?t.spacingX:0,n.paddingLeft=t.paddingLeft?t.paddingLeft:0,n.paddingRight=t.paddingRight?t.paddingRight:0,n.spacingY=t.spacingY?t.spacingY:0,n.paddingTop=t.paddingTop?t.paddingTop:0,n.paddingBottom=t.paddingBottom?t.paddingBottom:0),n}},e.grayNode=function(t,i){void 0===i&&(i=!0),t.getComponent(n)?t.getComponent(n).grayscale=i:t.getComponent(r)&&t.getComponent(r).setSharedMaterial(l.get(i?"ui-sprite-gray-material":"ui-sprite-material"),0);for(var o=t.children.length-1;o>=0;--o)e.grayNode(t.children[o],i)},e.genPureColorSpriteFrame=function(e){void 0===e&&(e=o.BLACK);var t=new c({_data:new Uint8Array([e.r,e.g,e.b,e.a]),width:1,height:1,format:g.PixelFormat.RGBA8888,_compressed:!1}),i=new g;i.image=t;var n=new f;return n.texture=i,n.packable=!1,n},e}()),e("coin",(function(e){return Math.floor(Number(e)).toLocaleString("en-GB")}));t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/Config.ts",["cc","./DebugHelper.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},null],execute:function(){n._RF.push({},"40158SU0ZxOKLMdCmbFF5Lj","Config",void 0);e("Config",(function(){this.service=void 0}));n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/DebugHelper.ts",["cc","./TimeHelper.ts","./CocosHelper.ts"],(function(e){var t,n,o,i,r,a,l,d,c,g,s,u,v,h;return{setters:[function(e){t=e.cclegacy,n=e.log,o=e.warn,i=e.Color,r=e.error,a=e.Node,l=e.color,d=e.UITransform,c=e.Layout,g=e.ScrollView,s=e.Button,u=e.Label},function(e){v=e.default},function(e){h=e.default}],execute:function(){t._RF.push({},"3acbdy/4b9CtoNZOA4v1GTw","DebugHelper",void 0);var p=function(e){return e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e}(p||{});e("default",new(function(){function e(){this.Level=p,this.level=p.INFO,this.logContent=null}var t=e.prototype;return t.log=function(){if(this.level>=p.INFO){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];n.apply(void 0,["["+v.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t))}},t.warn=function(){if(this.level>=p.WARN){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(void 0,["["+v.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.YELLOW)}},t.error=function(){if(this.level>=p.ERROR){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,["["+v.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.RED)}},t.switchDebugLogBtn=function(){var e=h.getRoot().getChildByName("logBtn");e?e.active=!e.active:(this.level=p.INFO,this._initLogPanel())},t._initLogPanel=function(){var e=new a,t=h.getRoot();t.addChild(e),h.addSprite(e,{spriteFrame:h.genPureColorSpriteFrame(l(0,0,0,180))});var n=e.getComponent(d);n.setContentSize(t.getComponent(d).contentSize);var o=new a;o.addComponent(d).anchorY=1,o.parent=e,h.addWidget(o,{top:0}),h.addLayout(o,{type:c.Type.VERTICAL}),this.logContent=o;var r=e.addComponent(g);r.horizontal=!1,r.vertical=!0,r.bounceDuration=.23,r.brake=.75,r.content=o,e.active=!1;var u=new a("logBtn");u.addComponent(d).anchorX=1,u.setPosition(n.width/2,0),h.addLabel(u,{string:"DEBUG",fontSize:30,color:i.YELLOW,enableBold:!0}),t.addChild(u),u.addComponent(s),u.on(s.EventType.CLICK,(function(){e.active=!e.active}));var v=new a;v.setPosition(.5*n.width-100,.5*-n.height+100),h.addLabel(v,{string:"Clean",fontSize:30,color:i.RED,enableBold:!0}),e.addChild(v),v.addComponent(s),v.on(s.EventType.CLICK,(function(){o.removeAllChildren()}))},t._addLblNode=function(e,t){var n=new a;h.addLabel(n,{string:e,fontSize:24,color:t,overflow:u.Overflow.RESIZE_HEIGHT}),n.getComponent(d).width=this.logContent.parent.getComponent(d).width-20,n.parent=this.logContent},e}()));t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/DebugManger.ts",["cc","./kk.ts","./TimeHelper.ts","./CocosHelper.ts"],(function(e){var t,n,o,i,a,r,l,d,c,g,u,s,v,f,h;return{setters:[function(e){t=e.cclegacy,n=e.log,o=e.warn,i=e.Color,a=e.error,r=e.Node,l=e.color,d=e.UITransform,c=e.Layout,g=e.ScrollView,u=e.Button,s=e.Label},function(e){v=e.default},function(e){f=e.default},function(e){h=e.default}],execute:function(){t._RF.push({},"92a97FRRcFCp5MaT6sivuVS","DebugManger",void 0);var C=function(e){return e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e}(C||{});e("default",function(){function e(){this.level=C.INFO,this.logContent=null}var t=e.prototype;return t.log=function(){if(this.level>=C.INFO){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];n.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t))}},t.warn=function(){if(this.level>=C.WARN){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.YELLOW)}},t.error=function(){if(this.level>=C.ERROR){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,["["+f.getCurDetailTime()+"]"].concat(t)),this.logContent&&this._addLblNode(JSON.stringify(t),i.RED)}},t.switchDebugLogBtn=function(){var e=v.godNode.getChildByName("logBtn");e?e.active=!e.active:(this.level=C.INFO,this._initLogPanel())},t._initLogPanel=function(){var e=new r;v.godNode.addChild(e),h.addSprite(e,{spriteFrame:h.genPureColorSpriteFrame(l(0,0,0,180))});var t=e.getComponent(d);t.setContentSize(v.godNode.getComponent(d).contentSize);var n=new r;n.addComponent(d).anchorY=1,n.parent=e,h.addWidget(n,{top:0}),h.addLayout(n,{type:c.Type.VERTICAL}),this.logContent=n;var o=e.addComponent(g);o.horizontal=!1,o.vertical=!0,o.bounceDuration=.23,o.brake=.75,o.content=n,e.active=!1;var a=new r("logBtn");a.addComponent(d).anchorX=1,a.setPosition(t.width/2,0),h.addLabel(a,{string:"DEBUG",fontSize:30,color:i.YELLOW,enableBold:!0}),v.godNode.addChild(a),a.addComponent(u),a.on(u.EventType.CLICK,(function(){e.active=!e.active}));var s=new r;s.setPosition(.5*t.width-100,.5*-t.height+100),h.addLabel(s,{string:"Clean",fontSize:30,color:i.RED,enableBold:!0}),e.addChild(s),s.addComponent(u),s.on(u.EventType.CLICK,(function(){n.removeAllChildren()}))},t._addLblNode=function(e,t){var n=new r;h.addLabel(n,{string:e,fontSize:24,color:t,overflow:s.Overflow.RESIZE_HEIGHT}),n.getComponent(d).width=this.logContent.parent.getComponent(d).width-20,n.parent=this.logContent},e}()).Level=C,t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/EventManager.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"880304hnV5Pi7rmDyL9jULg","EventManager",void 0);t("default",function(){function t(){this._eventObjMap=new Map}var e=t.prototype;return e.on=function(t,e,n){this._on(t,e,n,!1)},e.once=function(t,e,n){this._on(t,e,n,!0)},e._on=function(t,e,n,a){var i=this._eventObjMap.get(t);i||(i=[],this._eventObjMap.set(t,i)),-1===i.findIndex((function(t){return t.target===n&&t.callback===e}))&&i.push({target:n,callback:e,once:a})},e.off=function(t,e,n){var a=this._eventObjMap.get(t);if(a)if(e&&n){var i=a.findIndex((function(t){return t.target===n&&t.callback===e}));-1!==i&&a.splice(i,1)}else a=null,this._eventObjMap.delete(t)},e.offTargetAll=function(t){this._eventObjMap.forEach((function(e,n){if(e)for(var a=e.length-1;a>=0;a--)e[a].target===t&&e.splice(a,1)}))},e.emit=function(t){var e=this._eventObjMap.get(t);if(e){for(var n=null,a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];for(var c=e.length-1;c>=0;c--)(n=e[c]).callback.apply(n.target,i),n.once&&e.splice(c,1)}},t}());e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts","./CocosHelper.ts"],(function(e){var t,i,o,s;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){o=e.default},function(e){s=e.coin}],execute:function(){i._RF.push({},"c7eaevsO9RA0p/DL5eXf7Mk","GameData",void 0);e("default",new(function(){function e(){this.id=void 0,this.username=void 0,this.displayName=void 0,this.token=void 0,this.refreshToken=void 0,this.gold=void 0,this.goldFree=void 0,this._elo=void 0,this._elobanqi=void 0,this.changedElo=0,this._isLoggedIn=!1}var i=e.prototype;return i.getElo=function(e){return void 0===e&&(e=!1),e?this._elobanqi:this._elo},i.setELo=function(e,t){void 0===t&&(t=!1),t?(this.changedElo=e-this._elobanqi,this._elobanqi=e):(this.changedElo=e-this._elo,this._elo=e)},i.login=function(e){var t=e.id,i=e.username,s=e.token,n=e.gold,l=e.goldFree,d=e.password,r=e.refreshToken,a=e.displayName;this.id=t,this.username=i,this.displayName=a,this.token=s,this.refreshToken=r,this.gold=n||0,this.goldFree=l||0,this._isLoggedIn=!0,o.localMgr.setItem("token",s,!0),o.localMgr.setItem("refreshToken",r,!0),o.localMgr.setItem("username",i,!0),o.localMgr.setItem("password",d,!0)},i.logout=function(){this.id=null,this.username=null,this.displayName=null,this.token=null,this.refreshToken=null,this.gold=0,this.goldFree=0,this._isLoggedIn=!1},i.updateDisplayName=function(e){this.displayName=e},t(e,[{key:"info",get:function(){return{id:this.id,username:this.username,displayName:this.displayName,token:this.token,gold:this.gold,goldFree:this.goldFree,goldString:s(this.gold),goldFreeString:s(this.goldFree)}}},{key:"isLoggedIn",get:function(){return this._isLoggedIn}}]),e}()));i._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/HttpManager.ts",["cc","./DebugHelper.ts"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy},function(e){o=e.default}],execute:function(){t._RF.push({},"27e7cz+RAxJ2Lc6W/RVFIDA","HttpManager",void 0);e("default",function(){function e(){}var t=e.prototype;return t.reqAsync=function(e,t){var o=this;return void 0===t&&(t={}),new Promise((function(n,r){o._request({url:e,timeout:t.timeout||8e3,responseType:t.responseType||"json",contentType:t.contentType||"application/x-www-form-urlencoded",method:t.method||(t.body?"POST":"GET"),body:t.body,token:t.token},n,r)}))},t._request=function(e,t,n){var r=new XMLHttpRequest;r.timeout=e.timeout,r.responseType=e.responseType,r.onreadystatechange=function(){var s,u,i,a;4===r.readyState&&((null==(s=r.response)?void 0:s.statusCode)>=200&&(null==(u=r.response)?void 0:u.statusCode)<=400?(o.log({url:e.url,body:e.body,recv:r.response}),t(r.response)):401==(null==(i=r.response)?void 0:i.statusCode)||403==(null==(a=r.response)?void 0:a.statusCode)?t(r.response):n("Please Check Network! "+r.status))},r.ontimeout=function(){n("Time Out")},r.onabort=function(){n("Network Abort")},r.onerror=function(){n("Network Error")},r.open(e.method,e.url,!0),e.token&&r.setRequestHeader("Authorization","Bearer "+e.token);var s=null;if(e.body)if(r.setRequestHeader("Content-Type",e.contentType),"application/x-www-form-urlencoded"==e.contentType){var u=[];for(var i in e.body)u.push("".concat(i,"=",e.body[i]));s=u.join("&")}else s="application/json"==e.contentType?JSON.stringify(e.body):e.body;r.send(s)},e}());t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/kk.ts",["cc","./UIManager.ts","./LocalManager.ts","./SoundManager.ts","./EventManager.ts","./DebugManger.ts","./HttpManager.ts","./SocketManager.ts","./LocalizationManager.ts","./Config.ts","./SkinManager.ts"],(function(n){var e,t,a,o,u,i,g,c,f,r,d,s;return{setters:[function(n){e=n.cclegacy,t=n.find},function(n){a=n.default},function(n){o=n.default},function(n){u=n.default},function(n){i=n.default},function(n){g=n.default},function(n){c=n.default},function(n){f=n.default},function(n){r=n.LocalizationManager},function(n){d=n.Config},function(n){s=n.SkinGameManager}],execute:function(){e._RF.push({},"d1b197geZhNFbP/VTdLfvan","kk",void 0);var l=n("default",{uiMgr:new a,localMgr:new o,soundMgr:new u,eventMgr:new i,debugMgr:new g,httpMgr:new c,socketMgr:new f,godNode:null,lang:new r,config:new d,skinsMgr:new s,init:function(){l.godNode=t("Canvas")}});e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKAvatarWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./KKCountDownCircleWidget.ts","./GameData.ts","./CocosHelper.ts"],(function(t){var e,i,n,r,a,o,u,s,l,p,c,h,f,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,u=t.Enum,s=t.CCInteger,l=t.Sprite,p=t.SpriteFrame,c=t.CCBoolean},function(t){h=t.UIBase},function(t){f=t.KKCountDownCircleWidget},function(t){g=t.default},function(t){b=t.getRankByElo}],execute:function(){var d,m,K,y,v,w,H,S,z,C,D,B,E,F,A,I,M,N,W,q,G,P,T,_,j;a._RF.push({},"a179077Vn9FqJPXHTCq4MGN","KKAvatarWidget",void 0);var x=o.ccclass,L=o.property,O=(o.executeInEditMode,t("DANH_HIEU",function(t){return t[t["Nhập môn"]=0]="Nhập môn",t[t["Tập sự"]=1]="Tập sự",t[t["Phong trào"]=2]="Phong trào",t[t["Kỳ thủ"]=3]="Kỳ thủ",t[t["Kỳ sỹ"]=4]="Kỳ sỹ",t[t["Kỳ vương"]=5]="Kỳ vương",t}({})));u(O);t("KKAvatarWidget",(d=x("KKAvatarWidget"),m=L({type:O,displayName:"Danh Hiệu"}),K=L(s),y=L({type:[l]}),v=L({type:[p]}),w=L({type:[p]}),H=L(l),S=L(l),z=L(f),C=L(c),D=L(c),B=L(c),d((A=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"danhHieu",A,r(e)),n(e,"star",I,r(e)),n(e,"spStar",M,r(e)),n(e,"spfStar",N,r(e)),n(e,"spfKhung",W,r(e)),n(e,"spAvatar",q,r(e)),n(e,"spKhung",G,r(e)),n(e,"countDown",P,r(e)),n(e,"isMe",T,r(e)),n(e,"isBanqi",_,r(e)),n(e,"isGetHigher",j,r(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.spStar=this.getObj("star").getComponentsInChildren(l)},a.onEnable=function(){if(this.isMe)if(this.isGetHigher){var t=g.getElo(!0),e=g.getElo(),i=Math.max(e,t),n=b(i);this.star=n.star,this.danhHieu=O[n.name]}else{var r=g.getElo(this.isBanqi),a=b(r);this.star=a.star,this.danhHieu=O[a.name]}this.updateSprite()},a.init=function(t){var e=b(t);e&&(this.star=null==e?void 0:e.star,this.danhHieu=O[null==e?void 0:e.name],this.updateSprite())},a.startFill=function(t,e){void 0===e&&(e=!0),this.countDown.startFill(t,e)},a.updateSprite=function(){this.spKhung.spriteFrame=this.spfKhung[this.danhHieu],this.updateStar()},a.updateStar=function(){var t=this;this.danhHieu!=O["Nhập môn"]?(this.getObj("star").active=!0,this.spStar.forEach((function(e,i){i<t.star?e.spriteFrame=t.spfStar[0]:e.spriteFrame=t.spfStar[1]}))):this.getObj("star").active=!1},a.onBtnClick=function(t,e){},e}(h)).prototype,"danhHieu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O["Tập sự"]}}),I=e(F.prototype,"star",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(F.prototype,"spStar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(F.prototype,"spfStar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(F.prototype,"spfKhung",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=e(F.prototype,"spAvatar",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(F.prototype,"spKhung",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(F.prototype,"countDown",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(F.prototype,"isMe",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=e(F.prototype,"isBanqi",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(F.prototype,"isGetHigher",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=F))||E));a._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKCountDownCircleWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(i){var t,e,n,r,c,s,o,l,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){c=i.cclegacy,s=i._decorator,o=i.Sprite,l=i.Color},function(i){u=i.UIBase}],execute:function(){var a,h,p,g,f;c._RF.push({},"69b9aRY93BNkZn38jZpHD6m","KKCountDownCircleWidget",void 0);var R=s.ccclass,d=s.property;i("KKCountDownCircleWidget",(a=R("KKCountDownCircleWidget"),h=d(o),a((f=t((g=function(i){function t(){for(var t,e=arguments.length,c=new Array(e),s=0;s<e;s++)c[s]=arguments[s];return t=i.call.apply(i,[this].concat(c))||this,n(t,"circle",f,r(t)),t.currTime=0,t.initTime=0,t.isRunning=!1,t}e(t,i);var c=t.prototype;return c.startFill=function(i,t){void 0===t&&(t=!0),this.node.active=t,t?this.isRunning||(this.currTime=i,this.initTime=i,this.circle.fillRange=1,this.isRunning=!0):this.isRunning=!1},c.update=function(i){this.isRunning&&this.currTime<=10?this.circle.color=l.RED:this.circle.color=l.GREEN,this.currTime>0&&this.isRunning?(this.currTime-=i,this.circle.fillRange=this.currTime/this.initTime):(this.isRunning=!1,this.circle.fillRange=0)},t}(u)).prototype,"circle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));c._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKCreateDisplayNamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./kk.ts","./RandomTextUtil.ts","./KKUtils.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./GameData.ts"],(function(t){var e,a,n,r,i,o,s,u,p,c,l,d,m,f,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,p=t.EditBox},function(t){c=t.PopupBase},function(t){l=t.default},function(t){d=t.RandomTextUtil},function(t){m=t.default},function(t){f=t.httpCenter},function(t){h=t.HttpRoute},function(t){y=t.default}],execute:function(){var N,K,b,g,v;s._RF.push({},"97537zVay5NP6zbeHAEQYOe","KKCreateDisplayNamePopup",void 0);var D=u.ccclass,R=u.property;t("KKCreateDisplayNamePopup",(N=D("KKCreateDisplayNamePopup"),K=R(p),N((v=e((g=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"displayNameInput",v,r(e)),e}a(e,t);var s=e.prototype;return s.onLoad=function(){this.updateRandomName()},s.getRandomName=function(){var t=l.config.service.listName;return t[Math.floor(Math.random()*t.length)]+"-"+d.radomTextNumber(4)},s.handleUpdateDisplayName=function(){var t=i(o().mark((function t(){var e,a,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.displayNameInput.string.trim()){t.next=4;break}return m.showToast("Vui lòng nhập tên hiển thị"),t.abrupt("return");case 4:return t.next=6,f.reqAsync(h.updateDisplayName,{method:"POST",body:{displayName:e}});case 6:if(200===(a=t.sent).statusCode){t.next=12;break}return m.showToast(a.message),t.abrupt("return");case 12:y.updateDisplayName(e),null==(n=this.recvData)||n.cb(),this.close();case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.updateRandomName=function(){this.displayNameInput.string=this.getRandomName()},s.onBtnClick=function(t,e){switch(e){case"random":this.updateRandomName();break;case"confirm":this.handleUpdateDisplayName()}},e}(c)).prototype,"displayNameInput",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));s._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKElTopClassWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./KKAvatarWidget.ts","./SpriteNumber.ts"],(function(e){var t,i,n,r,a,o,l,s,p,u,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.SpriteFrame,s=e.Label,p=e.Sprite},function(e){u=e.UIBase},function(e){c=e.KKAvatarWidget},function(e){g=e.SpriteNumber}],execute:function(){var b,f,m,v,h,d,K,C,y;a._RF.push({},"db689bE6Z1F84ozsfixoTtk","KKElTopClassWidget",void 0);var j=o.ccclass,k=o.property;e("KKElTopClassWidget",(b=j("KKElTopClassWidget"),f=k(c),m=k(g),v=k([l]),b((K=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"avatar",K,r(t)),n(t,"rank",C,r(t)),n(t,"spriteFrame",y,r(t)),t}i(t,e);var a=t.prototype;return a.init=function(e){if(this.getObj("Container.NameUser").getComponent(s).string=e.username,this.getObj("Container.Line1.el.Label-001").getComponent(s).string=e.elo,this.getObj("Container.Line1.el-001.Label-001").getComponent(s).string=e.eloMax,this.avatar.init(e.elo),e.rank<=3){var t=this.getObj("top.icon");t.active=!0,this.getObj("top.number").active=!1,t.getComponent(p).spriteFrame=this.spriteFrame[e.rank-1]}else{this.getObj("top.icon").active=!1,this.getObj("top.number").active=!0,this.rank.node.getComponent(g).value=e.rank}},a.onBtnClick=function(e,t){},t}(u)).prototype,"avatar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(d.prototype,"rank",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"spriteFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=d))||h));a._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKEmailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts"],(function(o){var e,t,n,c;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator},function(o){c=o.PopupBase}],execute:function(){var i;t._RF.push({},"56e33dVbe9FcobSE4Y1z6sl","KKEmailPopup",void 0);var s=n.ccclass;n.property,o("KKEmailPopup",s("KKEmailPopup")(i=function(o){function t(){return o.apply(this,arguments)||this}e(t,o);var n=t.prototype;return n.onLoad=function(){this.enableClickBlankToClose()},n.onBtnClick=function(o,e){switch(e){case"close":this.close()}},t}(c))||i);t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKFogotPassPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts"],(function(o){var t,n,u,e;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,u=o._decorator},function(o){e=o.PopupBase}],execute:function(){var s;n._RF.push({},"4be7dhDyRxGELDuGdn45cOK","KKFogotPassPopup",void 0);var p=u.ccclass;u.property,o("KKFogotPassPopup",p("KKFogotPassPopup")(s=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var u=n.prototype;return u.onLoad=function(){},u.start=function(){},u.onBtnClick=function(o,t){},n}(e))||s);n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKFriendsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./KKItemFriendWidget.ts","./KKTableView.ts","./KKHttpCenter.ts","./KKHttpRoute.ts"],(function(t){var e,n,i,r,o,a,s,l,c,p,u,h,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,c=t.EditBox,p=t.Sprite},function(t){u=t.PopupBase},function(t){h=t.KKItemFriendWidget},function(t){d=t.default},function(t){f=t.httpCenter},function(t){y=t.HttpRoute}],execute:function(){var g,K,b,T,m,v,w,z,F;s._RF.push({},"3256cueYWpN+IzQEOwErWnc","KKFriendsPopup",void 0);var C=l.ccclass,P=l.property;t("KKFriendsPopup",(g=C("KKFriendsPopup"),K=P(d),b=P(c),T=P([p]),g((w=e((v=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).data=[],i(e,"hrzTV",w,r(e)),i(e,"editSearch",z,r(e)),i(e,"btnType",F,r(e)),e._type=0,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.enableClickBlankToClose(),this.hrzTV.updateCell.target=this.node,this.hrzTV.updateCell.handler="vtcUpdateCell",this.getFollowList()},s.onBtnClick=function(t,e){var n=this;switch(e){case"close":this.close();break;case"type=0":case"type=1":case"type=2":this._type=parseInt(e.split("=")[1]),this.btnType.forEach((function(t,e){e===n._type?t.grayscale=!1:t.grayscale=!0})),this.getFollowList()}},s.getFollowList=function(){var t=o(a().mark((function t(){var e,n,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.reqAsync(y.getFollowers,{body:{type:this._type,limit:1e3,keyword:null!=(e=this.editSearch.string.trim())?e:""},method:"POST"});case 2:i=t.sent,null!=(n=i.data)&&n.items&&(this.data=null==(r=i.data)?void 0:r.items,this.hrzTV.scrollToTop(),this.hrzTV.refreshData(this.data.length));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.vtcUpdateCell=function(t,e,n){console.log("vtcUpdateCell",t,e,this.data[e]),t.getComponent(h).init(this.data[e])},e}(u)).prototype,"hrzTV",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(v.prototype,"editSearch",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(v.prototype,"btnType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=v))||m));s._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKGameUIConf.ts",["cc","./UIConfig.ts"],(function(e){var o,n;return{setters:[function(e){o=e.cclegacy},function(e){n=e.UICacheMode}],execute:function(){o._RF.push({},"8b633e6LxtCgol19ZuJSjzq","KKGameUIConf",void 0);var a=e("KKBundleConf",{Load:"KKLoadBundle",Common:"KKCommonBundle",CoTuong:"KKCoTuongBundle",Home:"KKHomeBundle",Audios:"Audios",Auth:"KKAuthBundle",Banqi:"KKBanqiBundle",PracticeWithBot:"KKPracticeWithBotBundle",CoThe:"KKCoTheBundle"});e("KKLayerConf",{Load:{bundle:a.Load,name:"KKLoadLayer"},CoTuong:{bundle:a.CoTuong,name:"KKCoTuongLayer",cacheMode:n.Cache},Home:{bundle:a.Home,name:"KKHomeLayer",cacheMode:n.Stay},Auth:{bundle:a.Auth,name:"KKAuthLayer",cacheMode:n.Stay},Banqi:{bundle:a.Banqi,name:"KKBanqiLayer"},PracticeWithBot:{bundle:a.PracticeWithBot,name:"KKPracticeWithBotLayer"},CoThe:{bundle:a.CoThe,name:"KKCoTheLayer",cacheMode:n.Stay}}),e("KKCommonWidgetConf",{Toast:{bundle:a.Common,name:"KKToastWidget",cacheMode:n.Cache},Loading:{bundle:a.Common,name:"KKLoadingWidget",cacheMode:n.Cache},CountDownCircle:{bundle:a.Common,name:"KKCountDownCircleWidget"},StatusPlayer:{bundle:a.Common,name:"KKStatusPlayerWidget"},TagRank:{bundle:a.Common,name:"KKTagRankWidget",cacheMode:n.Cache}}),e("KKHomePanelConf",{Home:{bundle:a.Home,name:"KKHomePanel"}}),e("KKHomePopupConf",{OptionsMatch:{bundle:a.Home,name:"KKOptionsMatchPopup"},Help:{bundle:a.Home,name:"KKHelpPopup"},Profile:{bundle:a.Home,name:"KKProfilePopup"},FogotPass:{bundle:a.Home,name:"KKFogotPassPopup"},InfoAccount:{bundle:a.Home,name:"KKInfoAccountPopup"},SettingPractice:{bundle:a.Home,name:"KKSettingPracticePopup"},Email:{bundle:a.Home,name:"KKEmailPopup",cacheMode:n.Cache},Setting:{bundle:a.Home,name:"KKSettingPopup",cacheMode:n.Cache},TopClass:{bundle:a.Home,name:"KKTopClassPopup",cacheMode:n.Cache},Friends:{bundle:a.Home,name:"KKFriendsPopup",cacheMode:n.Cache},ListMatches:{bundle:a.Home,name:"KKListMatchesPopup",cacheMode:n.Cache},CreateDisplayName:{bundle:a.Home,name:"KKCreateDisplayNamePopup",cacheMode:n.Cache}}),e("KKCommonPopupConf",{LuckyWheel:{bundle:a.Common,name:"KKLuckyWheelPopup"},DialogPopup:{bundle:a.Common,name:"DialogPopup",cacheMode:n.Cache}});o._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHelpPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts"],(function(e){var t,r,i,n,o,s,p,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,p=e.SpriteFrame,a=e.Sprite,l=e.Color},function(e){c=e.PopupBase}],execute:function(){var u,b,h,f,m,w,y,S,K;o._RF.push({},"a1168bpfDBLGIGhhYc/JntQ","KKHelpPopup",void 0);var F=s.ccclass,d=s.property;e("KKHelpPopup",(u=F("KKHelpPopup"),b=d([p]),h=d([a]),f=d(a),u((y=t((w=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"spriteFrames",y,n(t)),i(t,"btnSprites",S,n(t)),i(t,"sprite",K,n(t)),t}r(t,e);var o=t.prototype;return o.onLoad=function(){this.enableClickBlankToClose()},o.start=function(){this.btnSprites[0].color=new l(255,255,255,255),this.btnSprites[1].color=new l(255,255,255,150)},o.onBtnClick=function(e,t){switch(t){case"close":this.close();break;case"co-tuong":this.sprite.spriteFrame=this.spriteFrames[0],this.btnSprites[0].color=new l(255,255,255,255),this.btnSprites[1].color=new l(255,255,255,150);break;case"co-up":this.sprite.spriteFrame=this.spriteFrames[1],this.btnSprites[0].color=new l(255,255,255,150),this.btnSprites[1].color=new l(255,255,255,255)}},t}(c)).prototype,"spriteFrames",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(w.prototype,"btnSprites",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(w.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=w))||m));o._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHomeBundle",["./KKAvatarWidget.ts","./KKCreateDisplayNamePopup.ts","./KKElTopClassWidget.ts","./KKEmailPopup.ts","./KKFogotPassPopup.ts","./KKFriendsPopup.ts","./KKHelpPopup.ts","./KKHomeLayer.ts","./KKHomePanel.ts","./KKInfoAccountPopup.ts","./KKItemFriendWidget.ts","./KKItemMatch.ts","./KKListMatchesPopup.ts","./KKOptionsMatchPopup.ts","./KKProfilePopup.ts","./KKSettingPopup.ts","./KKSettingPracticePopup.ts","./KKTopClassPopup.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHomeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerBase.ts","./kk.ts","./KKGameUIConf.ts","./SocketIO.ts","./GameData.ts","./LabelEllipsis.ts"],(function(e){var n,t,o,i,r,a,l,s,u,c,p,f,b,d,y,g,h,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,u=e.Label},function(e){c=e.LayerBase},function(e){p=e.default},function(e){f=e.KKHomePopupConf,b=e.KKCommonPopupConf,d=e.KKLayerConf,y=e.KKHomePanelConf},function(e){g=e.default},function(e){h=e.default},function(e){m=e.EllipsisLabel}],execute:function(){var L,K,w,P,v,M,k,A,I,C,F;l._RF.push({},"aa9bfrxdiBLr7nTM2doFurt","KKHomeLayer",void 0);var G=s.ccclass,H=s.property;e("KKHomeLayer",(L=G("KKHomeLayer"),K=H(m),w=H(u),P=H(u),v=H(u),L((A=n((k=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"lbUserName",A,i(n)),o(n,"lbId",I,i(n)),o(n,"lbGold",C,i(n)),o(n,"lbGoldFree",F,i(n)),n}t(n,e);var l=n.prototype;return l.onLoad=function(){var e=r(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.connect(),n=this.getObj("Panel"),e.next=4,p.uiMgr.createPanelAsync(y.Home);case 4:t=e.sent,n.addChild(t),g.on("login",(function(e){h.isLoggedIn&&p.uiMgr.goLayerAsync(d.Auth,{isLogout:!0})})),g.on("updateElo",(function(e){h.setELo(null==e?void 0:e.elo,null==e?void 0:e.isBanqi)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.onDestroy=function(){g.off("login"),g.off("updateElo")},l.onEnable=function(){this.updateUI(),h.info.displayName||p.uiMgr.showPopupAsync(f.CreateDisplayName,{cb:this.updateUI.bind(this)})},l.updateUI=function(){var e;this.lbUserName.setLabelText(null!=(e=h.info.displayName)?e:h.info.username),this.lbId.string="ID: "+h.info.id,this.lbGold.string=h.info.goldFreeString,this.lbGoldFree.string=h.info.goldFreeString},l.onBtnClick=function(e,n){switch(n){case"wheel":p.uiMgr.showPopupAsync(b.LuckyWheel);break;case"profile":p.uiMgr.showPopupAsync(f.Profile);break;case"practice":p.uiMgr.showPopupAsync(f.SettingPractice);break;case"setting":p.uiMgr.showPopupAsync(f.Setting);break;case"mail":p.uiMgr.showPopupAsync(f.Email);break;case"top":p.uiMgr.showPopupAsync(f.TopClass);break;case"friend":p.uiMgr.showPopupAsync(f.Friends);break;case"views":p.uiMgr.showPopupAsync(f.ListMatches)}},n}(c)).prototype,"lbUserName",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(k.prototype,"lbId",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(k.prototype,"lbGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(k.prototype,"lbGoldFree",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=k))||M));l._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHomePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./kk.ts","./KKGameUIConf.ts","./KKUtils.ts"],(function(e){var n,t,o,c,u,a,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator},function(e){c=e.UIBase},function(e){u=e.default},function(e){a=e.KKLayerConf,s=e.KKHomePopupConf},function(e){i=e.default}],execute:function(){var r;t._RF.push({},"9409c54t3lK1J+9tY+uOQ1u","KKHomePanel",void 0);var l=o.ccclass;o.property,e("KKHomePanel",l("KKHomePanel")(r=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onBtnClick=function(e,n){switch(n){case"dau":u.uiMgr.showPopupAsync(s.OptionsMatch);break;case"cothe":u.uiMgr.goLayerAsync(a.CoThe);break;case"giaidau":i.showToast("Giải đấu đang được chuẩn bị.")}},t}(c))||r);t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHttpCenter.ts",["cc","./kk.ts","./KKUtils.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){o=t.default}],execute:function(){e._RF.push({},"183e2smj5pCCoDMavSz54m7","KKHttpCenter",void 0);var i=function(t){return t[t.Nothing=0]="Nothing",t[t.Toast=1]="Toast",t[t.Popup=2]="Popup",t}(i||{});t("httpCenter",new(function(){function t(){this.FailType=i}var e=t.prototype;return e.reqAsync=function(t,e){var l,u,r,a,c;e||(e={});var s={body:e.body,baseUrl:null!=(l=e.baseUrl)?l:n.config.service.httpServer,timeout:null!=(u=e.timeout)?u:10,method:null!=(r=e.method)?r:"GET",loading:null==(a=e.loading)||a,failType:null!=(c=e.failType)?c:i.Popup};return s.loading&&o.showLoading(!0),this._reqAsync(s.baseUrl+t,s)},e._reqAsync=function(t,e){var l=this;return new Promise((function(u,r){n.httpMgr.reqAsync(t,{body:e.body,timeout:1e3*e.timeout,method:e.method,token:n.localMgr.getItemWithDefault("token","",!0)}).then(u).catch((function(n){e.failType==i.Nothing?r(n):e.failType==i.Toast?(o.showToast(n),r(n)):e.failType==i.Popup&&o.showCommonPopup({title:"Đã có lỗi xảy ra",desc:n,btnTxtCls:"Thử lại",closeCall:function(){l._reqAsync(t,e).then(u).catch(r)}})})).finally((function(){console.log("请求结束",t,e.body),e.loading&&o.showLoading(!1)}))}))},t}()));e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKHttpRoute.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"3d6d48plBpLdbPm2JN6Fvm6","KKHttpRoute",void 0);t("HttpRoute",{register:"/account/register",login:"/account/login",getUser:"/account/user",updateDisplayName:"/account/update-display-name",getFollowers:"/account-follow",getRanking:"/account-follow/ranking",follow:"/account-follow/follow",matches:"/account-follow/matches"});o._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKInfoAccountPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts"],(function(o){var n,t,u,c;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,u=o._decorator},function(o){c=o.PopupBase}],execute:function(){var e;t._RF.push({},"2f58evAjVJP0LUdLPMF5ky6","KKInfoAccountPopup",void 0);var p=u.ccclass;u.property,o("KKInfoAccountPopup",p("KKInfoAccountPopup")(e=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var u=t.prototype;return u.onLoad=function(){},u.start=function(){},u.onBtnClick=function(o,n){},t}(c))||e);t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKItemFriendWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./KKStatusPlayerWidget.ts","./KKAvatarWidget.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./kk.ts","./KKGameUIConf.ts"],(function(t){var e,n,i,o,a,r,l,u,s,c,b,d,p,f,h,w,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,s=t.Node,c=t.Label},function(t){b=t.UIBase},function(t){d=t.KKStatusPlayerWidget},function(t){p=t.KKAvatarWidget},function(t){f=t.httpCenter},function(t){h=t.HttpRoute},function(t){w=t.default},function(t){g=t.KKLayerConf}],execute:function(){var v,m,K,F,y,I,U,k,z,B,W,x,R,A,C;l._RF.push({},"cc638R1BjJDRoNeiksgBixh","KKItemFriendWidget",void 0);var P=u.ccclass,_=u.property;t("KKItemFriendWidget",(v=P("KKItemFriendWidget"),m=_(s),K=_(s),F=_(s),y=_(c),I=_(d),U=_(p),v((B=e((z=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"btnFollow",B,o(e)),i(e,"btnUnFollow",W,o(e)),i(e,"btnView",x,o(e)),i(e,"lbName",R,o(e)),i(e,"status",A,o(e)),i(e,"avatar",C,o(e)),e.data=null,e}n(e,t);var l=e.prototype;return l.init=function(t){var e,n,i,o,a,r;this.data=t,this.lbName.string=null==(e=this.data)?void 0:e.name,this.status.updateStatus(null!=t&&t.room?"co_tuong_up"===(null==t?void 0:t.room)?3:4:null!=t&&t.isOnline?1:2),this.btnView.active=!(null==(n=this.data)||!n.room),this.btnFollow.active=!(null!=(i=this.data)&&i.isFollowing),this.btnUnFollow.active=null==(o=this.data)?void 0:o.isFollowing,this.avatar.init(Math.max(null==(a=this.data)?void 0:a.elo,null==(r=this.data)?void 0:r.eloBanqi))},l.onBtnClick=function(){var t=a(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btnFollow"!=n&&"btnUnFollow"!=n){t.next=3;break}return t.next=3,f.reqAsync(h.follow,{body:{followeeId:this.data.id},method:"POST"});case 3:t.t0=n,t.next="btnFollow"===t.t0?6:"btnUnFollow"===t.t0?10:"btnView"===t.t0?14:16;break;case 6:return this.data.isFollowing=!0,this.btnFollow.active=!1,this.btnUnFollow.active=!0,t.abrupt("break",16);case 10:return this.data.isFollowing=!1,this.btnFollow.active=!0,this.btnUnFollow.active=!1,t.abrupt("break",16);case 14:w.uiMgr.closeAllPopup(),w.uiMgr.goLayerAsync(g.CoTuong,{isViewer:!0,roomID:this.data.room});case 16:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e}(b)).prototype,"btnFollow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(z.prototype,"btnUnFollow",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"btnView",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"lbName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"status",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"avatar",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=z))||k));l._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKItemMatch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./kk.ts","./KKGameUIConf.ts"],(function(e){var i,t,l,n,r,o,a,s,u,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Label},function(e){s=e.UIBase},function(e){u=e.default},function(e){c=e.KKLayerConf}],execute:function(){var b,p,f,h,m,g,y,d,v,K,w,I,B;r._RF.push({},"085e59J5O9Jg63zgXj7E7hQ","KKItemMatch",void 0);var U=o.ccclass,z=o.property;e("KKItemMatch",(b=U("KKItemMatch"),p=z(a),f=z(a),h=z(a),m=z(a),g=z(a),b((v=i((d=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return i=e.call.apply(e,[this].concat(r))||this,l(i,"lbNameUser01",v,n(i)),l(i,"lbNameUser02",K,n(i)),l(i,"lbElo01",w,n(i)),l(i,"lbElo02",I,n(i)),l(i,"lbView",B,n(i)),i.data=null,i.isBanqi=!1,i}t(i,e);var r=i.prototype;return r.init=function(e,i){var t,l,n,r,o;void 0===i&&(i=!1),console.log("KKItemMatch init:",e,i),this.data=e,this.isBanqi=i,!e||(null==e||null==(t=e.players)?void 0:t.length)<=1||(this.lbNameUser01.string=null==(l=e.players)?void 0:l[0].name,this.lbNameUser02.string=null==(n=e.players)?void 0:n[1].name,this.lbElo01.string=null==(r=e.players)?void 0:r[0].elo,this.lbElo02.string=null==(o=e.players)?void 0:o[1].elo,this.lbView.string=e.view)},r.onBtnClick=function(e,i){var t;switch(i){case"view":console.log("View match:",this.data),u.uiMgr.closeAllPopup(),u.uiMgr.goLayerAsync(this.isBanqi?c.Banqi:c.CoTuong,{isViewer:!0,roomID:null==(t=this.data)?void 0:t.idRoom})}},i}(s)).prototype,"lbNameUser01",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(d.prototype,"lbNameUser02",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(d.prototype,"lbElo01",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(d.prototype,"lbElo02",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(d.prototype,"lbView",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKListMatchesPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./KKTableView.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./KKItemMatch.ts"],(function(t){var e,n,i,r,a,s,o,c,p,u,l,h,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,c=t._decorator,p=t.Sprite},function(t){u=t.PopupBase},function(t){l=t.default},function(t){h=t.httpCenter},function(t){f=t.HttpRoute},function(t){y=t.KKItemMatch}],execute:function(){var d,K,g,b,T,v,L;o._RF.push({},"07e1etxfDJAtLcMYBgdeGq5","KKListMatchesPopup",void 0);var m=c.ccclass,P=c.property;t("KKListMatchesPopup",(d=m("KKListMatchesPopup"),K=P(l),g=P([p]),d((v=e((T=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this)._type=0,e.data=[],i(e,"hrzTV",v,r(e)),i(e,"btnType",L,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.enableClickBlankToClose(),this.getList()},o.onBtnClick=function(t,e){var n=this;switch(e){case"close":this.close();break;case"load":this.getList();break;case"type=0":case"type=1":this._type=parseInt(e.split("=")[1]),this.btnType.forEach((function(t,e){e===n._type?t.grayscale=!1:t.grayscale=!0})),this.getList()}},o.getList=function(){var t=a(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.reqAsync(f.matches,{body:{type:this._type},method:"POST"});case 2:(e=t.sent).data&&(this.data=e.data,this.hrzTV.scrollToTop(),this.hrzTV.refreshData(this.data.length));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.vtcUpdateCell=function(t,e,n){console.log("vtcUpdateCell",t,e,this.data[e]),t.getComponent(y).init(this.data[e],1===this._type)},e}(u)).prototype,"hrzTV",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"btnType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=T))||b));o._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKOptionsMatchPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./kk.ts","./KKGameUIConf.ts"],(function(t){var n,e,o,r,c,u,a,s;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,c=t._decorator},function(t){u=t.PopupBase},function(t){a=t.default},function(t){s=t.KKLayerConf}],execute:function(){var i;r._RF.push({},"525cfyJNDlAi44BB9LQvDqF","KKOptionsMatchPopup",void 0);var p=c.ccclass;c.property,t("KKOptionsMatchPopup",p("KKOptionsMatchPopup")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var c=r.prototype;return c.onLoad=function(){this.enableClickBlankToClose()},c.onBtnClick=function(){var t=e(o().mark((function t(n,e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="cotuong"===t.t0?3:"coup"===t.t0?7:"close"===t.t0?11:13;break;case 3:return t.next=5,a.uiMgr.goLayerAsync(s.CoTuong);case 5:return this.close(),t.abrupt("break",13);case 7:return t.next=9,a.uiMgr.goLayerAsync(s.Banqi);case 9:case 11:return this.close(),t.abrupt("break",13);case 13:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),r}(u))||i);r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKProfilePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./GameData.ts","./CocosHelper.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./kk.ts","./KKUtils.ts","./KKGameUIConf.ts"],(function(t){var i,n,o,e,s,a,l,h,r,u,g,d,c,p;return{setters:[function(t){i=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){e=t.cclegacy,s=t._decorator,a=t.Label},function(t){l=t.PopupBase},function(t){h=t.default},function(t){r=t.coin},function(t){u=t.httpCenter},function(t){g=t.HttpRoute},function(t){d=t.default},function(t){c=t.default},function(t){p=t.KKLayerConf}],execute:function(){var f;e._RF.push({},"f15c5dQGupEdb+LSQnh4FOl","KKProfilePopup",void 0);var b=s.ccclass;s.property,t("KKProfilePopup",b("KKProfilePopup")(f=function(t){function e(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this).username=void 0,i.id=void 0,i.gold=void 0,i.freeGold=void 0,i.follower=void 0,i.elo=void 0,i.win=void 0,i.lose=void 0,i.rank=void 0,i.highscore=void 0,i.elobanqi=void 0,i.winbanqi=void 0,i.losebanqi=void 0,i.rankbanqi=void 0,i.highscorebanqi=void 0,i.winrate=void 0,i.totalWin=void 0,i.data=void 0,i}i(e,t);var s=e.prototype;return s.onLoad=function(){this.enableClickBlankToClose(),this.username=this.getObj("username").getComponent(a),this.id=this.getObj("id").getComponent(a),this.gold=this.getObj("money.coin.lbCoin").getComponent(a),this.freeGold=this.getObj("money.freeCoin.lbFreeCoin").getComponent(a),this.follower=this.getObj("follow.follower").getComponent(a),this.elo=this.getObj("Xangqi.elo-A.elo").getComponent(a),this.win=this.getObj("Xangqi.win-A.win").getComponent(a),this.lose=this.getObj("Xangqi.lose-A.lose").getComponent(a),this.rank=this.getObj("Xangqi.rank-A.rank").getComponent(a),this.highscore=this.getObj("Xangqi.high-A.highscore").getComponent(a),this.elobanqi=this.getObj("Banqi.elo-B.elobanqi").getComponent(a),this.winbanqi=this.getObj("Banqi.win-B.winbanqi").getComponent(a),this.losebanqi=this.getObj("Banqi.lose-B.losebanqi").getComponent(a),this.rankbanqi=this.getObj("Banqi.rank-B.rankbanqi").getComponent(a),this.highscorebanqi=this.getObj("Banqi.high-B.highscorebanqi").getComponent(a),this.winrate=this.getObj("winRate.winrate").getComponent(a),this.totalWin=this.getObj("totalWin.totalWin").getComponent(a)},s.onEnable=function(){this.getData()},s.start=function(){this.info()},s.info=function(){var t;this.username.string=null!=(t=h.info.displayName)?t:h.info.username,this.id.string="ID: "+h.info.id,this.freeGold.string=r(h.info.goldFree),this.gold.string=r(h.info.gold)},s.getData=function(){var t=this;u.reqAsync(g.getUser,{method:"GET"}).then((function(i){t.data=i.data,t.updateUI()}))},s.updateUI=function(){var t,i,n,o,e,s,a,l,h,u,g,d,c;this.data&&(this.follower.string=r(null==this||null==(t=this.data)?void 0:t.followerCount),this.elo.string=r(null==this||null==(i=this.data)?void 0:i.xiangqi.elo),this.win.string=r(null==this||null==(n=this.data)?void 0:n.xiangqi.win),this.lose.string=r(null==this||null==(o=this.data)?void 0:o.xiangqi.lose),this.rank.string=r(null==this||null==(e=this.data)?void 0:e.xiangqi.rank),this.highscore.string=r(null==this||null==(s=this.data)?void 0:s.xiangqi.eloMax),this.elobanqi.string=r(null==this||null==(a=this.data)?void 0:a.banqi.elo),this.winbanqi.string=r(null==this||null==(l=this.data)?void 0:l.banqi.win),this.losebanqi.string=r(null==this||null==(h=this.data)?void 0:h.banqi.lose),this.rankbanqi.string=r(null==this||null==(u=this.data)?void 0:u.banqi.rank),this.highscorebanqi.string=r(null==this||null==(g=this.data)?void 0:g.banqi.eloMax),this.winrate.string=r(null==this||null==(d=this.data)?void 0:d.winRate),this.totalWin.string=r(null==this||null==(c=this.data)?void 0:c.totalGames))},s.onBtnClick=function(t,i){var e,s=this;switch(i){case"close":this.close();break;case"logout":c.showCommonPopup({desc:"Tài khoản của bạn sẽ được đăng xuất khỏi trò chơi.",btnCall:(e=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.close(),d.uiMgr.goLayerAsync(p.Auth,{logout:!0});case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})})}},e}(l))||f);e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKSettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./kk.ts"],(function(e){var t,i,o,n,s,r,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,c=e.Toggle},function(e){u=e.PopupBase},function(e){l=e.default}],execute:function(){var a,h,p,d,g,f,b,m,k;s._RF.push({},"0ee18Ih2ZVNxKPBxjcF8Tov","KKSettingPopup",void 0);var v=r.ccclass,C=r.property;e("KKSettingPopup",(a=v("KKSettingPopup"),h=C(c),p=C(c),d=C(c),a((b=t((f=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,o(t,"music",b,n(t)),o(t,"sound",m,n(t)),o(t,"vibration",k,n(t)),t}i(t,e);var s=t.prototype;return s.onLoad=function(){this.enableClickBlankToClose()},s.start=function(){var e=l.localMgr.getItemWithDefault("sound",!0),t=l.localMgr.getItemWithDefault("music",!0),i=l.localMgr.getItemWithDefault("vibration",!0);this.sound.isChecked=e,this.music.isChecked=t,this.vibration.isChecked=i},s.onBtnClick=function(e,t){switch(t){case"close":this.close();break;case"music":console.log("music",this.music.isChecked),l.localMgr.setItem("music",!this.music.isChecked),l.soundMgr.setMusicMute(!this.music.isChecked);break;case"sound":console.log("sound",this.sound.isChecked),l.localMgr.setItem("sound",!this.sound.isChecked),l.soundMgr.setEffectMute(!this.sound.isChecked);break;case"vibration":l.localMgr.setItem("vibration",!this.vibration.isChecked)}},t}(u)).prototype,"music",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"sound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(f.prototype,"vibration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));s._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKSettingPracticePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./kk.ts","./KKGameUIConf.ts","./KKUtils.ts"],(function(e){var t,n,o,i,r,c,s,a,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.ToggleContainer},function(e){a=e.PopupBase},function(e){l=e.default},function(e){u=e.KKLayerConf},function(e){p=e.default}],execute:function(){var f,h,d,g,K,y,v;r._RF.push({},"7dd561MhkBJwIUM/1lPm85L","KKSettingPracticePopup",void 0);var P=c.ccclass,b=c.property;e("KKSettingPracticePopup",(f=P("KKSettingPracticePopup"),h=b({type:s}),d=b({type:s}),f((y=t((K=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,o(t,"chooseSide",y,i(t)),o(t,"chooseLevel",v,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.enableClickBlankToClose()},r.onBtnClick=function(e,t){switch(t){case"close":this.close();break;case"start":var n=this.chooseSide.toggleItems.find((function(e){return e.isChecked})),o=this.chooseLevel.toggleItems.find((function(e){return e.isChecked}));if(!n||!o)return void p.showToast("Vui lòng chọn quân và cấp độ");l.uiMgr.goLayerAsync(u.PracticeWithBot,{side:n.node.name,level:o.node.name}),this.close()}},t}(a)).prototype,"chooseSide",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(K.prototype,"chooseLevel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=K))||g));r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKStatusPlayerWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){var e,a,r,i,n,s,l,o,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,l=t.Enum,o=t.Label,u=t.Color},function(t){c=t.UIBase}],execute:function(){var N,p,O,b,f,g,h;n._RF.push({},"124bbokaOhIFZaenAfR26g1","KKStatusPlayerWidget",void 0);var y=s.ccclass,m=s.property,d=function(t){return t[t.NONE=0]="NONE",t[t.ONLINE=1]="ONLINE",t[t.OFFLINE=2]="OFFLINE",t[t.CO_UP=3]="CO_UP",t[t.CO_TUONG=4]="CO_TUONG",t}(d||{});l(d);t("KKStatusPlayerWidget",(N=y("KKStatusPlayerWidget"),p=m(o),O=m({type:d}),N((g=e((f=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"lbName",g,i(e)),r(e,"status",h,i(e)),e}return a(e,t),e.prototype.updateStatus=function(t){switch(this.status=t,this.status){case d.ONLINE:this.lbName.color=new u("#00A500"),this.lbName.string="Online";break;case d.OFFLINE:this.lbName.color=new u("#797979"),this.lbName.string="Offline";break;case d.CO_UP:case d.CO_TUONG:this.lbName.color=new u("#FF6600"),this.lbName.string=this.status===d.CO_UP?"Đang đấu cờ úp":"Đang đấu cờ tướng"}},e}(c)).prototype,"lbName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(f.prototype,"status",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.NONE}}),b=f))||b));n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKTableView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,l,o,i,n,r,c,a,s,p,f,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,c=e.Node,a=e.EventHandler,s=e.warn,p=e.ScrollView,f=e.error,u=e.UITransform,h=e.instantiate}],execute:function(){var d,m,g,v,N,y,C,S,_,O;n._RF.push({},"2a2e3JmU7lKMZQa07BNCJav","KKTableView",void 0);var w=r.ccclass,T=r.property;e("default",(d=T(c),m=T(c),g=T({type:a,tooltip:"Data-UI update callback-(cell:Node, idx:number, custom:string)"}),v=T({tooltip:"spacing between cells"}),w((C=t((y=function(e){function t(){for(var t,l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,o(t,"cellNode",C,i(t)),o(t,"notiEmpty",S,i(t)),o(t,"updateCell",_,i(t)),o(t,"spacing",O,i(t)),t.preOffset=null,t.cellPool=[],t.headHideNum=0,t.tailHideNum=0,t.cellNum=0,t.cellLen=0,t}l(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;!e.vertical&&!e.horizontal||e.vertical&&e.horizontal?s("TableView has wrong direction!"):(e.cellNode.active=!1,e.notiEmpty&&(e.notiEmpty.active=!1),e.node.on(p.EventType.SCROLL_BEGAN,e.onScrollBegan,e),e.node.on(p.EventType.SCROLLING,e.onScrolling,e))},n.refreshData=function(t){var l=this;if(console.log({numOfCells:t}),t<0)f("wrong number, must >= 0!");else{for(var o=l.cellNum,i=0;i<o;++i)l._removeCell(i);if(l.cellNum=t,0===t)return l.headHideNum=0,l.tailHideNum=0,l.notiEmpty&&(l.notiEmpty.active=!0),l.vertical?(l.cellLen=l.cellNode.getComponent(u).height+l.spacing,l.content.getComponent(u).height=0,e.prototype.scrollToTop.call(this)):(l.cellLen=l.cellNode.getComponent(u).width+l.spacing,l.content.getComponent(u).width=0,e.prototype.scrollToLeft.call(this)),void(l.preOffset=l.getScrollOffset());l.notiEmpty&&(l.notiEmpty.active=!1),l.vertical?(l.cellLen=l.cellNode.getComponent(u).height+l.spacing,l.content.getComponent(u).height=l.cellLen*t):(l.cellLen=l.cellNode.getComponent(u).width+l.spacing,l.content.getComponent(u).width=l.cellLen*t);var n=l.vertical?l.content.parent.getComponent(u).height:l.content.parent.getComponent(u).width;if(0==o){var r=Math.min(Math.ceil(n/l.cellLen),t);l.headHideNum=0,l.tailHideNum=t-r;for(var c=0;c<r;++c)l._addNewCell(c);l.vertical?e.prototype.scrollToTop.call(this):e.prototype.scrollToLeft.call(this),l.preOffset=l.getScrollOffset()}else{l.stopAutoScroll(),l._wrapOffset(l.preOffset);var a=l.vertical?l.preOffset.y:-l.preOffset.x,s=Math.ceil((a+n)/l.cellLen);s=Math.min(s,t),l.tailHideNum=t-s,l.headHideNum=Math.floor(a/l.cellLen);for(var p=l.headHideNum;p<s;++p)l._addNewCell(p)}}},n.scrollToTop=function(t,l){this.stopAutoScroll(),e.prototype.scrollToTop.call(this,t,l),this._checkScroll(t)},n.scrollToBottom=function(t,l){this.stopAutoScroll(),e.prototype.scrollToBottom.call(this,t,l),this._checkScroll(t)},n.scrollToLeft=function(t,l){this.stopAutoScroll(),e.prototype.scrollToLeft.call(this,t,l),this._checkScroll(t)},n.scrollToRight=function(t,l){this.stopAutoScroll(),e.prototype.scrollToRight.call(this,t,l),this._checkScroll(t)},n._checkScroll=function(e){var t=this;e||(t.preOffset=t.getScrollOffset(),t.refreshData(t.cellNum))},n.scrollToOffset=function(t,l,o){this.stopAutoScroll(),e.prototype.scrollToOffset.call(this,t,l,o),this._checkScroll(l)},n._updateCell=function(e,t){var l=this;l.updateCell.target&&l.updateCell.handler&&l.updateCell.emit([e,t])},n._getCell=function(){var e=this,t=null;return e.cellPool.length>0?t=e.cellPool.pop():(t=h(e.cellNode)).active=!0,t.parent=e.content,t},n._removeCell=function(e){var t=this.content.getChildByName(String(e));t&&(t.removeFromParent(),this.cellPool.push(t))},n._setCellPosWithIdx=function(e,t){var l=this,o=e.getPosition();l.vertical?o.y=0-l.cellLen/2*(2*t+1)+l.spacing/2:o.x=l.cellLen/2*(2*t+1)-l.spacing/2,e.setPosition(o)},n._checkCellWithIdx=function(e){this.content.getChildByName(String(e))||this._addNewCell(e)},n._addNewCell=function(e){var t=this,l=t._getCell();l.name=String(e),t._updateCell(l,e),t._setCellPosWithIdx(l,e)},n._wrapOffset=function(e){var t=this;t.vertical?e.y<0?e.y=0:e.y>t.getMaxScrollOffset().y&&(e.y=t.getMaxScrollOffset().y):e.x>0?e.x=0:e.x<-t.getMaxScrollOffset().x&&(e.x=-t.getMaxScrollOffset().x)},n.onScrollBegan=function(e){this.preOffset=e.getScrollOffset()},n.onScrolling=function(e){var t=this;if(0!=t.cellNum){var l=e.getScrollOffset();t._wrapOffset(l),t.vertical?t._onScroll(l.y-t.preOffset.y>0,l.y,t.content.parent.getComponent(u).height):t._onScroll(l.x-t.preOffset.x<0,-l.x,t.content.parent.getComponent(u).width),t.preOffset=l}},n._onScroll=function(e,t,l){var o=this,i=o.cellLen;if(e){var n=Math.floor(t/i);if(n>o.headHideNum){for(var r=o.headHideNum;r<n;++r)o._removeCell(r);o.headHideNum=n}for(var c=Math.ceil((t+l)/i),a=o.cellNum-o.tailHideNum;a<c;++a)o._checkCellWithIdx(a);o.tailHideNum=o.cellNum-c}else{var s=o.cellNum-Math.ceil((t+l)/i);if(s>o.tailHideNum){for(var p=o.tailHideNum;p<s;++p)o._removeCell(o.cellNum-p-1);o.tailHideNum=s}for(var f=Math.floor(t/i),u=o.headHideNum-1;u>=f;--u)o._checkCellWithIdx(u);o.headHideNum=f}},t}(p)).prototype,"cellNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"notiEmpty",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(y.prototype,"updateCell",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),O=t(y.prototype,"spacing",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=y))||N));n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKTopClassPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./KKHttpCenter.ts","./KKHttpRoute.ts","./KKTableView.ts","./KKElTopClassWidget.ts"],(function(t){var e,n,i,o,r,a,s,p,l,c,u,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,p=t._decorator,l=t.Sprite},function(t){c=t.PopupBase},function(t){u=t.httpCenter},function(t){h=t.HttpRoute},function(t){y=t.default},function(t){f=t.KKElTopClassWidget}],execute:function(){var d,T,g,K,b,C,v;s._RF.push({},"1fe9dyzG2xE7JCz98Byjpod","KKTopClassPopup",void 0);var m=p.ccclass,z=p.property;t("KKTopClassPopup",(d=m("KKTopClassPopup"),T=z(y),g=z([l]),d((C=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._type=0,e.data=[],i(e,"hrzTV",C,o(e)),i(e,"btnType",v,o(e)),e.myTop=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.myTop=this.getObj("KKElTopClassWidget").getComponent(f),this.enableClickBlankToClose(),this.getList()},s.onBtnClick=function(t,e){var n=this;switch(e){case"close":this.close();break;case"type=0":case"type=1":this._type=parseInt(e.split("=")[1]),this.btnType.forEach((function(t,e){e===n._type?t.grayscale=!1:t.grayscale=!0})),this.getList()}},s.getList=function(){var t=r(a().mark((function t(){var e,n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.reqAsync(h.getRanking,{body:{type:this._type},method:"POST"});case 2:n=t.sent,null!=(e=n.data)&&e.ranking&&(this.data=null==(i=n.data)?void 0:i.ranking,this.hrzTV.scrollToTop(),this.hrzTV.refreshData(this.data.length),this.myTop.init(n.data.rankAccount));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.vtcUpdateCell=function(t,e,n){t.getComponent(f).init(this.data[e])},e}(c)).prototype,"hrzTV",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(b.prototype,"btnType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=b))||K));s._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/KKUtils.ts",["cc","./KKGameUIConf.ts","./kk.ts"],(function(o){var n,t,e,i,u;return{setters:[function(o){n=o.cclegacy,t=o.v3},function(o){e=o.KKCommonPopupConf,i=o.KKCommonWidgetConf},function(o){u=o.default}],execute:function(){n._RF.push({},"5eecdz1G6BN8ryn48pHUkhk","KKUtils",void 0),o("default",function(){function o(){}return o.showCommonPopup=function(o){return u.uiMgr.showPopupAsync(e.DialogPopup,o)},o.showToast=function(o){u.uiMgr.createWidgetAsync(i.Toast,{msg:o}).then((function(o){u.godNode.children.forEach((function(o,n){o.name==i.Toast.name&&(o.position=t(o.position.x,o.position.y+110,o.position.z))})),o.parent=u.godNode}))},o.showLoading=function(o){var n=this;this._loadingCounter++;var t,e=this._loadingCounter;o?u.uiMgr.createWidgetAsync(i.Loading).then((function(o){n._loadingCounter===e?o.parent=u.godNode:o.destroy()})):null==(t=u.godNode.getChildByName(i.Loading.name))||t.destroy()},o}())._loadingCounter=0,n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/LabelEllipsis.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,l,a,r,n,s,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,s=e.Label,o=e.UITransform,c=e.Component}],execute:function(){var p,u,b,h,f,d;r._RF.push({},"9fc93nMQPRG3LFdvyqQ2w2D","LabelEllipsis",void 0);var g=n.ccclass,L=n.property;e("EllipsisLabel",(p=g("EllipsisLabel"),u=L(s),p((f=t((h=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,l(t,"label",f,a(t)),l(t,"maxCharacters",d,a(t)),t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.label||(this.label=this.getComponent(s)),this.label&&this.updateLabelWithEllipsis()},r.updateLabelWithEllipsis=function(){if(this.label){var e=this.label.string;this.label.node.getComponent(o).contentSize.width;e.length>this.maxCharacters?this.label.string=e.substring(0,this.maxCharacters-3)+"...":this.label.string=e}},r.setLabelText=function(e){this.label.string=e,this.updateLabelWithEllipsis()},t}(c)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(h.prototype,"maxCharacters",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),b=h))||b));r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/LayerBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){var t,r,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator},function(e){s=e.UIBase}],execute:function(){var a;r._RF.push({},"a7388/HzEVFtq5K31XcR06N","LayerBase",void 0);var o=n.ccclass;e("LayerBase",o("LayerBase")(a=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.refresh=function(){},r}(s))||a);r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/LocalizationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts"],(function(e){var t,n,a,r,i,o;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,r=e.resources,i=e.JsonAsset},function(e){o=e.default}],execute:function(){a._RF.push({},"a907ctOFLBHW4DfGMwIbFWq","LocalizationManager",void 0);e("LocalizationManager",function(){function e(){this.currentLang="vi",this.langData={},this.labels=[]}var a=e.prototype;return a.loadLanguage=function(){var e=t(n().mark((function e(t){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),o.localMgr.setItem("selectedLang",""+t),e.prev=2,e.next=5,new Promise((function(e,n){r.load("lang/"+t,i,(function(t,a){t?n(t):e(a)}))}));case 5:a=e.sent,this.currentLang=t,this.langData=a.json,this.updateAllLabels(),o.eventMgr.emit("language-changed"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Failed to load language file:",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),a.registerLabel=function(e){this.labels.push(e)},a.unregisterLabel=function(e){this.labels=this.labels.filter((function(t){return t!==e}))},a.updateAllLabels=function(){this.labels.forEach((function(e){return e.updateText()}))},a.getText=function(e,t){var n=this.langData[e]||e;return t&&t.forEach((function(e,t){n=n.replace("{"+t+"}",e.toString())})),n},a.detectLanguage=function(){var e=o.localMgr.getItemWithDefault("selectedLang","vi"),t=navigator.language.split("-")[0];return e||t||"vi"},e}());a._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/LocalManager.ts",["cc","./Xor.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.cclegacy,r=t.sys},function(t){n=t.default}],execute:function(){e._RF.push({},"554fbebH89LW4XG8/1aIDS9","LocalManager",void 0);var a="any string";t("default",function(){function t(){}var e=t.prototype;return e.safeParse=function(t){try{return JSON.parse(t)}catch(t){return null}},e.getItem=function(t,e){void 0===e&&(e=!1);var o=r.localStorage.getItem(t);return null==o?null:(e&&(o=n.xor(o,a)),this.safeParse(o))},e.getItemWithDefault=function(t,e,o){void 0===o&&(o=!1);var u=r.localStorage.getItem(t);if(null==u)return this.setItem(t,e,o),e;o&&(u=n.xor(u,a));var l=this.safeParse(u);return null===l?(this.setItem(t,e,o),e):l},e.setItem=function(t,e,o){void 0===o&&(o=!1);var u=JSON.stringify(e);o&&(u=n.xor(u,a)),r.localStorage.setItem(t,u)},e.removeItem=function(t){r.localStorage.removeItem(t)},t}());e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/PopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./kk.ts"],(function(t){var e,n,o,i,s,a,c,r,l,u,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Widget,s=t.tween,a=t.v3,c=t.UIOpacity,r=t.Node,l=t.UITransform},function(t){u=t.UIBase},function(t){p=t.default}],execute:function(){var h;n._RF.push({},"82c96ZMl6RGy6W5Cg3SRgHF","PopupBase",void 0);var d=o.ccclass;t("PopupBase",d("PopupBase")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).ret=void 0,e.onDestroyCall=function(){},e}e(n,t);var o=n.prototype;return o.onDestroy=function(){p.uiMgr._autoRemovePopup(this.node.parent),this.onDestroyCall(this.ret),t.prototype.onDestroy.call(this)},o.close=function(){this.closeAnim()},o.showAnim=function(){this.node.getComponent(i).updateAlignment(),this.node.setScale(0,0,1),s(this.node).to(.2,{scale:a(1,1,1)},{easing:"backOut"}).start()},o.closeAnim=function(){var t=this;s(this.node).to(.2,{scale:a(0,0,1)},{easing:"backIn"}).call((function(){t.node.destroy()})).start()},o.setDarkBgOpacity=function(t){this.node.parent.getChildByName("dark").getComponent(c).opacity=t},o.enableClickBlankToClose=function(t){var e=this;(!t||0==t.length)&&this.node.children.length>0&&(t=[this.node.children[0]]),this.node.on(r.EventType.TOUCH_END,(function(n){var o=n.getUIStartLocation(),i=n.getUILocation().subtract(o);if(Math.abs(i.x)<15&&Math.abs(i.y)<15){for(var s=!0,a=0;a<t.length;++a)if(t[a].getComponent(l).getBoundingBoxToWorld().contains(o)){s=!1;break}s&&e.close()}}),this)},n}(u))||h);n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/RandomTextUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"ec43emvQ8ZI7azPKhtiLVG9","RandomTextUtil",void 0);t("RandomTextUtil",function(){function t(){}return t.radomText=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomNumber=function(t){for(var r="",n="0123456789",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextNumber=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextNumberSpecial=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t.radomTextSpecial=function(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+",o=n.length,a=0;a<t;a++)r+=n.charAt(Math.floor(Math.random()*o));return r},t}());r._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function n(e,r){return(n=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function u(t){var e=a(t,"string");return"symbol"==typeof e?e:String(e)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},arrayLikeToArray:i,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},createForOfIteratorHelperLoose:function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return r}));var e,r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),u=new k(n||[]);return i(a,"_invoke",{value:P(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};f(w,u,(function(){return this}));var L=Object.getPrototypeOf,O=L&&L(L(z([])));O&&O!==n&&o.call(O,u)&&(w=O);var j=b.prototype=g.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(n,i,a,u){var c=h(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function P(t,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=_(u,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,r,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function _(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function z(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=b,i(j,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=f(b,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},x(E.prototype),f(E.prototype,c,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(j),f(j,l,"Generator"),f(j,u,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=z,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:z(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},r},setPrototypeOf:n,toPrimitive:a,toPropertyKey:u,unsupportedIterableToArray:o})}}}));

System.register("bundle://KKHomeBundle/_virtual/SkinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KKGameUIConf.ts"],(function(n){var t,e,i,s,r,o,a,u;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime,i=n.createForOfIteratorHelperLoose},function(n){s=n.cclegacy,r=n.log,o=n.SpriteFrame,a=n.assetManager},function(n){u=n.KKBundleConf}],execute:function(){s._RF.push({},"49c1c4Pxb9HfYkiUN1W1zQ4","SkinManager",void 0);var c=n("GameType",function(n){return n[n.COTUONG=0]="COTUONG",n}({})),k=(n("SkinGameManager",function(){function n(){this.skins=new Map;var n=new k("1002",u.CoTuong,["1000","1001","1002"],c.COTUONG);this.skins.set(c.COTUONG,n)}var t=n.prototype;return t.getSkinManager=function(n){return this.skins.get(n)},t.setCurrentSkin=function(n,t,e){void 0===e&&(e=!1);var i=this.getSkinManager(n);i?e?i.resetToDefaultSkin():i.setCurrentSkin(t):console.warn("Không tìm thấy SkinManager cho gameType "+n)},n}()),function(){function n(n,t,e,i){this.currentSkin=void 0,this.defaultSkin=void 0,this.skinIds=void 0,this.bundle=void 0,this.skins=new Map,this.type=void 0,this.defaultSkin=n,this.bundle=t,this.skinIds=e,this.currentSkin=n,this.type=i}var s=n.prototype;return s.loadDirAssets=function(n,t,e){return new Promise((function(i,s){n.loadDir(t,e,(function(n,t,e){}),(function(n,t){n?s(n):i(t)}))}))},s.loadAllSkinAssets=function(){var n=t(e().mark((function n(){var t,s,u,k,h,l,f,d,g;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a.getBundle(this.bundle)){n.next=4;break}return console.error("Không tìm thấy bundle '"+this.bundle+"'!"),n.abrupt("return");case 4:if(this.type!=c.COTUONG){n.next=29;break}s=i(this.skinIds);case 6:if((u=s()).done){n.next=29;break}return k=u.value,h="Textures/skins/"+k+"/red",l="Textures/skins/"+k+"/black",n.prev=10,n.next=13,this.loadDirAssets(t,h,o);case 13:return f=n.sent,n.next=16,this.loadDirAssets(t,l,o);case 16:if(d=n.sent,8===f.length&&8===d.length){n.next=19;break}throw new Error("Skin "+k+" không đủ 8 sprite cho mỗi màu");case 19:g={red:f,black:d,other:[]},this.skins.set(k,g),r("Đã load skin "+c[this.type]+" '"+k+"' thành công."),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(10),console.error("Lỗi khi load skin assets cho skinId "+k+":",n.t0);case 27:n.next=6;break;case 29:case"end":return n.stop()}}),n,this,[[10,24]])})));return function(){return n.apply(this,arguments)}}(),s.getCurrentSkin=function(){return this.skins.get(this.currentSkin)},s.getAssetsBySkinId=function(n,t){return this.getCurrentSkin()[n].find((function(n){return n.name===t}))},s.setCurrentSkin=function(n){this.skins.has(n)?(this.currentSkin=n,r("Đã chuyển skin hiện tại sang: "+n)):console.warn("Skin '"+n+"' không tồn tại!")},s.resetToDefaultSkin=function(){this.currentSkin=this.defaultSkin,r("Reset skin về mặc định: "+this.defaultSkin)},s.getListSkin=function(){console.log(this.skins)},n}());s._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/socket.io.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var r=t("__cjsMetaURL",e.meta.url);n.define(r,(function(e,n,r,i,o){
/*!
         * Socket.IO v4.8.1
         * (c) 2014-2024 Guillermo Rauch
         * Released under the MIT License.
         */
var s,a;s=this,a=function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(t,e,n){if(c())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&u(i,n.prototype),i}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function o(){return(o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(null,arguments)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function d(t){var n="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return e(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}var y=Object.create(null);y.open="0",y.close="1",y.ping="2",y.pong="3",y.message="4",y.upgrade="5",y.noop="6";var v=Object.create(null);Object.keys(y).forEach((function(t){v[y[t]]=t}));var g,m={type:"error",data:"parser error"},b="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),_="function"==typeof ArrayBuffer,w=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},C=function(t,e,n){var r=t.type,i=t.data;return b&&i instanceof Blob?e?n(i):k(i,n):_&&(i instanceof ArrayBuffer||w(i))?e?n(i):k(new Blob([i]),n):n(y[r]+(i||""))},k=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};function A(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="undefined"==typeof Uint8Array?[]:new Uint8Array(256),T=0;T<E.length;T++)O[E.charCodeAt(T)]=T;var R,S="function"==typeof ArrayBuffer,F=function(t,e){if("string"!=typeof t)return{type:"message",data:B(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:x(t.substring(1),e)}:v[n]?t.length>1?{type:v[n],data:t.substring(1)}:{type:v[n]}:m},x=function(t,e){if(S){var n=function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),h=new Uint8Array(u);for(e=0;e<a;e+=4)n=O[t.charCodeAt(e)],r=O[t.charCodeAt(e+1)],i=O[t.charCodeAt(e+2)],o=O[t.charCodeAt(e+3)],h[c++]=n<<2|r>>4,h[c++]=(15&r)<<4|i>>2,h[c++]=(3&i)<<6|63&o;return u}(t);return B(n,e)}return{base64:!0,data:t}},B=function(t,e){switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},N=String.fromCharCode(30);function L(){return new TransformStream({transform:function(t,e){!function(t,e){b&&t.data instanceof Blob?t.data.arrayBuffer().then(A).then(e):_&&(t.data instanceof ArrayBuffer||w(t.data))?e(A(t.data)):C(t,!1,(function(t){g||(g=new TextEncoder),e(g.encode(t))}))}(t,(function(n){var r,i=n.length;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);var o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);var s=new DataView(r.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(i))}t.data&&"string"!=typeof t.data&&(r[0]|=128),e.enqueue(r),e.enqueue(n)}))}})}function j(t){return t.reduce((function(t,e){return t+e.length}),0)}function P(t,e){if(t[0].length===e)return t.shift();for(var n=new Uint8Array(e),r=0,i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function q(t){if(t)return function(t){for(var e in q.prototype)t[e]=q.prototype[e];return t}(t)}q.prototype.on=q.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},q.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},q.prototype.off=q.prototype.removeListener=q.prototype.removeAllListeners=q.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},q.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},q.prototype.emitReserved=q.prototype.emit,q.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},q.prototype.hasListeners=function(t){return!!this.listeners(t).length};var I="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},U="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function D(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var M=U.setTimeout,V=U.clearTimeout;function H(t,e){e.useNativeTimers?(t.setTimeoutFn=M.bind(U),t.clearTimeoutFn=V.bind(U)):(t.setTimeoutFn=U.setTimeout.bind(U),t.clearTimeoutFn=U.clearTimeout.bind(U))}function K(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var z=function(t){function e(e,n,r){var i;return(i=t.call(this,e)||this).description=n,i.context=r,i.type="TransportError",i}return a(e,t),e}(d(Error)),W=function(t){function e(e){var n;return(n=t.call(this)||this).writable=!1,H(n,e),n.opts=e,n.query=e.query,n.socket=e.socket,n.supportsBinary=!e.forceBase64,n}a(e,t);var n=e.prototype;return n.onError=function(e,n,r){return t.prototype.emitReserved.call(this,"error",new z(e,n,r)),this},n.open=function(){return this.readyState="opening",this.doOpen(),this},n.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.send=function(t){"open"===this.readyState&&this.write(t)},n.onOpen=function(){this.readyState="open",this.writable=!0,t.prototype.emitReserved.call(this,"open")},n.onData=function(t){var e=F(t,this.socket.binaryType);this.onPacket(e)},n.onPacket=function(e){t.prototype.emitReserved.call(this,"packet",e)},n.onClose=function(e){this.readyState="closed",t.prototype.emitReserved.call(this,"close",e)},n.pause=function(t){},n.createUri=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)},n._hostname=function(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"},n._port=function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""},n._query=function(t){var e=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}(t);return e.length?"?"+e:""},e}(q),Y=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._polling=!1,e}a(e,t);var n=e.prototype;return n.doOpen=function(){this._poll()},n.pause=function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this._polling||!this.writable){var r=0;this._polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()},n._poll=function(){this._polling=!0,this.doPoll(),this.emitReserved("poll")},n.onData=function(t){var e=this;(function(t,e){for(var n=t.split(N),r=[],i=0;i<n.length;i++){var o=F(n[i],e);if(r.push(o),"error"===o.type)break}return r})(t,this.socket.binaryType).forEach((function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())},n.doClose=function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)},n.write=function(t){var e=this;this.writable=!1,function(t,e){var n=t.length,r=new Array(n),i=0;t.forEach((function(t,o){C(t,!1,(function(t){r[o]=t,++i===n&&e(r.join(N))}))}))}(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emitReserved("drain")}))}))},n.uri=function(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=K()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)},r(e,[{key:"name",get:function(){return"polling"}}])}(W),$=!1;try{$="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}var J=$;function Q(){}var X=function(t){function e(e){var n;if(n=t.call(this,e)||this,"undefined"!=typeof location){var r="https:"===location.protocol,i=location.port;i||(i=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}return n}a(e,t);var n=e.prototype;return n.doWrite=function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(function(t,e){n.onError("xhr post error",t,e)}))},n.doPoll=function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e,n){t.onError("xhr poll error",e,n)})),this.pollXhr=e},e}(Y),G=function(t){function e(e,n,r){var i;return(i=t.call(this)||this).createRequest=e,H(i,r),i._opts=r,i._method=r.method||"GET",i._uri=n,i._data=void 0!==r.data?r.data:null,i._create(),i}a(e,t);var n=e.prototype;return n._create=function(){var t,n=this,r=D(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;var i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(var o in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}catch(t){}if("POST"===this._method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{i.setRequestHeader("Accept","*/*")}catch(t){}null===(t=this._opts.cookieJar)||void 0===t||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=function(){var t;3===i.readyState&&(null===(t=n._opts.cookieJar)||void 0===t||t.parseCookies(i.getResponseHeader("set-cookie"))),4===i.readyState&&(200===i.status||1223===i.status?n._onLoad():n.setTimeoutFn((function(){n._onError("number"==typeof i.status?i.status:0)}),0))},i.send(this._data)}catch(t){return void this.setTimeoutFn((function(){n._onError(t)}),0)}"undefined"!=typeof document&&(this._index=e.requestsCount++,e.requests[this._index]=this)},n._onError=function(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)},n._cleanup=function(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Q,t)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete e.requests[this._index],this._xhr=null}},n._onLoad=function(){var t=this._xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())},n.abort=function(){this._cleanup()},e}(q);function Z(){for(var t in G.requests)G.requests.hasOwnProperty(t)&&G.requests[t].abort()}G.requestsCount=0,G.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Z):"function"==typeof addEventListener&&addEventListener("onpagehide"in U?"pagehide":"unload",Z,!1));var tt,et=(tt=rt({xdomain:!1}))&&null!==tt.responseType,nt=function(t){function e(e){var n;n=t.call(this,e)||this;var r=e&&e.forceBase64;return n.supportsBinary=et&&!r,n}return a(e,t),e.prototype.request=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t,{xd:this.xd},this.opts),new G(rt,this.uri(),t)},e}(X);function rt(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||J))return new XMLHttpRequest}catch(t){}if(!e)try{return new(U[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}var it="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),ot=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.doOpen=function(){var t=this.uri(),e=this.opts.protocols,n=it?{}:D(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()},n.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}},n.write=function(t){var e=this;this.writable=!1;for(var n=function(){var n=t[r],i=r===t.length-1;C(n,e.supportsBinary,(function(t){try{e.doWrite(n,t)}catch(t){}i&&I((function(){e.writable=!0,e.emitReserved("drain")}),e.setTimeoutFn)}))},r=0;r<t.length;r++)n()},n.doClose=function(){void 0!==this.ws&&(this.ws.onerror=function(){},this.ws.close(),this.ws=null)},n.uri=function(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=K()),this.supportsBinary||(e.b64=1),this.createUri(t,e)},r(e,[{key:"name",get:function(){return"websocket"}}])}(W),st=U.WebSocket||U.MozWebSocket,at={websocket:function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.createSocket=function(t,e,n){return it?new st(t,e,n):e?new st(t,e):new st(t)},n.doWrite=function(t,e){this.ws.send(e)},e}(ot),webtransport:function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.doOpen=function(){var t=this;try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then((function(){t.onClose()})).catch((function(e){t.onError("webtransport error",e)})),this._transport.ready.then((function(){t._transport.createBidirectionalStream().then((function(e){var n=function(t,e){R||(R=new TextDecoder);var n=[],r=0,i=-1,o=!1;return new TransformStream({transform:function(s,a){for(n.push(s);;){if(0===r){if(j(n)<1)break;var c=P(n,1);o=128==(128&c[0]),i=127&c[0],r=i<126?3:126===i?1:2}else if(1===r){if(j(n)<2)break;var u=P(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(2===r){if(j(n)<8)break;var h=P(n,8),f=new DataView(h.buffer,h.byteOffset,h.length),p=f.getUint32(0);if(p>Math.pow(2,21)-1){a.enqueue(m);break}i=p*Math.pow(2,32)+f.getUint32(4),r=3}else{if(j(n)<i)break;var l=P(n,i);a.enqueue(F(o?l:R.decode(l),e)),r=0}if(0===i||i>t){a.enqueue(m);break}}}})}(Number.MAX_SAFE_INTEGER,t.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=L();i.readable.pipeTo(e.writable),t._writer=i.writable.getWriter(),function e(){r.read().then((function(n){var r=n.done,i=n.value;r||(t.onPacket(i),e())})).catch((function(t){}))}();var o={type:"open"};t.query.sid&&(o.data='{"sid":"'.concat(t.query.sid,'"}')),t._writer.write(o).then((function(){return t.onOpen()}))}))}))},n.write=function(t){var e=this;this.writable=!1;for(var n=function(){var n=t[r],i=r===t.length-1;e._writer.write(n).then((function(){i&&I((function(){e.writable=!0,e.emitReserved("drain")}),e.setTimeoutFn)}))},r=0;r<t.length;r++)n()},n.doClose=function(){var t;null===(t=this._transport)||void 0===t||t.close()},r(e,[{key:"name",get:function(){return"webtransport"}}])}(W),polling:nt},ct=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ut=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ht(t){if(t.length>8e3)throw"URI too long";var e,n,r,i=t,o=t.indexOf("["),s=t.indexOf("]");-1!=o&&-1!=s&&(t=t.substring(0,o)+t.substring(o,s).replace(/:/g,";")+t.substring(s,t.length));for(var a,c,u=ct.exec(t||""),h={},f=14;f--;)h[ut[f]]=u[f]||"";return-1!=o&&-1!=s&&(h.source=i,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=(e=h.path,n=/\/{2,9}/g,r=e.replace(n,"/").split("/"),"/"!=e.slice(0,1)&&0!==e.length||r.splice(0,1),"/"==e.slice(-1)&&r.splice(r.length-1,1),r),h.queryKey=(a=h.query,c={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(c[e]=n)})),c),h}var ft="function"==typeof addEventListener&&"function"==typeof removeEventListener,pt=[];ft&&addEventListener("offline",(function(){pt.forEach((function(t){return t()}))}),!1);var lt=function(t){function e(e,n){var r;if((r=t.call(this)||this).binaryType="arraybuffer",r.writeBuffer=[],r._prevBufferLen=0,r._pingInterval=-1,r._pingTimeout=-1,r._maxPayload=-1,r._pingTimeoutTime=1/0,e&&"object"===p(e)&&(n=e,e=null),e){var i=ht(e);n.hostname=i.host,n.secure="https"===i.protocol||"wss"===i.protocol,n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=ht(n.host).host);return H(r,n),r.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=r.secure?"443":"80"),r.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=n.port||("undefined"!=typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=[],r._transportsByName={},n.transports.forEach((function(t){var e=t.prototype.name;r.transports.push(e),r._transportsByName[e]=t})),r.opts=o({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"==typeof r.opts.query&&(r.opts.query=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}(r.opts.query)),ft&&(r.opts.closeOnBeforeunload&&(r._beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r._beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r._offlineEventListener=function(){r._onClose("transport close",{description:"network connection lost"})},pt.push(r._offlineEventListener))),r.opts.withCredentials&&(r._cookieJar=void 0),r._open(),r}a(e,t);var n=e.prototype;return n.createTransport=function(t){var e=o({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);var n=o({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)},n._open=function(){var t=this;if(0!==this.transports.length){var n=this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";var r=this.createTransport(n);r.open(),this.setTransport(r)}else this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0)},n.setTransport=function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(function(t){return e._onClose("transport close",t)}))},n.onOpen=function(){this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()},n._onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":var e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}},n.onHandshake=function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()},n._resetPingTimeout=function(){var t=this;this.clearTimeoutFn(this._pingTimeoutTimer);var e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((function(){t._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()},n._onDrain=function(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()},n.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}},n._getWritablePackets=function(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t,e=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer},n._hasPingExpired=function(){var t=this;if(!this._pingTimeoutTime)return!0;var e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,I((function(){t._onClose("ping timeout")}),this.setTimeoutFn)),e},n.write=function(t,e,n){return this._sendPacket("message",t,e,n),this},n.send=function(t,e,n){return this._sendPacket("message",t,e,n),this},n._sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},n.close=function(){var t=this,e=function(){t._onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?r():e()})):this.upgrading?r():e()),this},n._onError=function(t){if(e.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)},n._onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ft&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){var n=pt.indexOf(this._offlineEventListener);-1!==n&&pt.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}},e}(q);lt.protocol=4;var dt=function(t){function e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="object"===p(e)?e:n;return(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map((function(t){return at[t]})).filter((function(t){return!!t}))),t.call(this,e,r)||this}return a(e,t),e}(function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._upgrades=[],e}a(e,t);var n=e.prototype;return n.onOpen=function(){if(t.prototype.onOpen.call(this),"open"===this.readyState&&this.opts.upgrade)for(var e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])},n._probe=function(t){var e=this,n=this.createTransport(t),r=!1;lt.priorWebsocketSuccess=!1;var i=function(){r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(t){if(!r)if("pong"===t.type&&"probe"===t.data){if(e.upgrading=!0,e.emitReserved("upgrading",n),!n)return;lt.priorWebsocketSuccess="websocket"===n.name,e.transport.pause((function(){r||"closed"!==e.readyState&&(h(),e.setTransport(n),n.send([{type:"upgrade"}]),e.emitReserved("upgrade",n),n=null,e.upgrading=!1,e.flush())}))}else{var i=new Error("probe error");i.transport=n.name,e.emitReserved("upgradeError",i)}})))};function o(){r||(r=!0,h(),n.close(),n=null)}var s=function(t){var r=new Error("probe error: "+t);r.transport=n.name,o(),e.emitReserved("upgradeError",r)};function a(){s("transport closed")}function c(){s("socket closed")}function u(t){n&&t.name!==n.name&&o()}var h=function(){n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),e.off("close",c),e.off("upgrading",u)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn((function(){r||n.open()}),200):n.open()},n.onHandshake=function(e){this._upgrades=this._filterUpgrades(e.upgrades),t.prototype.onHandshake.call(this,e)},n._filterUpgrades=function(t){for(var e=[],n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e},e}(lt));function yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vt,gt,mt={exports:{}};function bt(){if(gt)return vt;gt=1;var t=1e3,e=60*t,n=60*e,r=24*n,i=7*r,o=365.25*r;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}return vt=function(a,c){c=c||{};var u=p(a);if("string"===u&&a.length>0)return function(s){if(!((s=String(s)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(a){var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}(a);if("number"===u&&isFinite(a))return c.long?function(i){var o=Math.abs(i);return o>=r?s(i,o,r,"day"):o>=n?s(i,o,n,"hour"):o>=e?s(i,o,e,"minute"):o>=t?s(i,o,t,"second"):i+" ms"}(a):function(i){var o=Math.abs(i);return o>=r?Math.round(i/r)+"d":o>=n?Math.round(i/n)+"h":o>=e?Math.round(i/e)+"m":o>=t?Math.round(i/t)+"s":i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}var _t=function(t){function e(t){var r,i,o,s=null;function a(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),c=s-(r||s);o.diff=c,o.prev=r,o.curr=s,r=s,n[0]=e.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return"%";u++;var i=e.formatters[r];if("function"==typeof i){var s=n[u];t=i.call(o,s),n.splice(u,1),u--}return t})),e.formatArgs.call(o,n);var h=o.log||e.log;h.apply(o,n)}}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o)},set:function(t){s=t}}),"function"==typeof e.init&&e.init(a),a}function n(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(h(e.names.map(r)),h(e.skips.map(r).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=bt(),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e};!function(t,e){var n;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=_t(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(mt,mt.exports);var wt=yt(mt.exports),Ct=wt("socket.io-client:url"),kt="function"==typeof ArrayBuffer,At=Object.prototype.toString,Et="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===At.call(Blob),Ot="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===At.call(File);function Tt(t){return kt&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||Et&&t instanceof Blob||Ot&&t instanceof File}function Rt(t,e){if(!t||"object"!==p(t))return!1;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(Rt(t[n]))return!0;return!1}if(Tt(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Rt(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Rt(t[i]))return!0;return!1}function St(t){var e=[],n=t.data,r=t;return r.data=Ft(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Ft(t,e){if(!t)return t;if(Tt(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=Ft(t[i],e);return r}if("object"===p(t)&&!(t instanceof Date)){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=Ft(t[s],e));return o}return t}function xt(t,e){return t.data=Bt(t.data,e),delete t.attachments,t}function Bt(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Bt(t[n],e);else if("object"===p(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Bt(t[r],e));return t}var Nt,Lt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Nt||(Nt={}));var jt=function(){function t(t){this.replacer=t}var e=t.prototype;return e.encode=function(t){return t.type!==Nt.EVENT&&t.type!==Nt.ACK||!Rt(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===Nt.EVENT?Nt.BINARY_EVENT:Nt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})},e.encodeAsString=function(t){var e=""+t.type;return t.type!==Nt.BINARY_EVENT&&t.type!==Nt.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e},e.encodeAsBinary=function(t){var e=St(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r},t}(),Pt=function(t){function e(e){var n;return(n=t.call(this)||this).reviver=e,n}a(e,t);var n=e.prototype;return n.add=function(e){var n;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(n=this.decodeString(e)).type===Nt.BINARY_EVENT;r||n.type===Nt.BINARY_ACK?(n.type=r?Nt.EVENT:Nt.ACK,this.reconstructor=new qt(n),0===n.attachments&&t.prototype.emitReserved.call(this,"decoded",n)):t.prototype.emitReserved.call(this,"decoded",n)}else{if(!Tt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,t.prototype.emitReserved.call(this,"decoded",n))}},n.decodeString=function(t){var n=0,r={type:Number(t.charAt(0))};if(void 0===Nt[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Nt.BINARY_EVENT||r.type===Nt.BINARY_ACK){for(var i=n+1;"-"!==t.charAt(++n)&&n!=t.length;);var o=t.substring(i,n);if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1)){for(var s=n+1;++n&&","!==t.charAt(n)&&n!==t.length;);r.nsp=t.substring(s,n)}else r.nsp="/";var a=t.charAt(n+1);if(""!==a&&Number(a)==a){for(var c=n+1;++n;){var u=t.charAt(n);if(null==u||Number(u)!=u){--n;break}if(n===t.length)break}r.id=Number(t.substring(c,n+1))}if(t.charAt(++n)){var h=this.tryParse(t.substr(n));if(!e.isPayloadValid(r.type,h))throw new Error("invalid payload");r.data=h}return r},n.tryParse=function(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}},e.isPayloadValid=function(t,e){switch(t){case Nt.CONNECT:return Ut(e);case Nt.DISCONNECT:return void 0===e;case Nt.CONNECT_ERROR:return"string"==typeof e||Ut(e);case Nt.EVENT:case Nt.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===Lt.indexOf(e[0]));case Nt.ACK:case Nt.BINARY_ACK:return Array.isArray(e)}},n.destroy=function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)},e}(q),qt=function(){function t(t){this.packet=t,this.buffers=[],this.reconPack=t}var e=t.prototype;return e.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=xt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},e.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},t}(),It=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Ut(t){return"[object Object]"===Object.prototype.toString.call(t)}var Dt=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Nt},Encoder:jt,Decoder:Pt,isPacketValid:function(t){return"string"==typeof t.nsp&&(void 0===(e=t.id)||It(e))&&function(t,e){switch(t){case Nt.CONNECT:return void 0===e||Ut(e);case Nt.DISCONNECT:return void 0===e;case Nt.EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===Lt.indexOf(e[0]));case Nt.ACK:return Array.isArray(e);case Nt.CONNECT_ERROR:return"string"==typeof e||Ut(e);default:return!1}}(t.type,t.data);var e}});function Mt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var Vt=wt("socket.io-client:socket"),Ht=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Kt=function(t){function e(e,n,r){var i;return(i=t.call(this)||this).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,r&&r.auth&&(i.auth=r.auth),i._opts=o({},r),i.io._autoConnect&&i.open(),i}a(e,t);var n=e.prototype;return n.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[Mt(t,"open",this.onopen.bind(this)),Mt(t,"packet",this.onpacket.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this))]}},n.connect=function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this},n.open=function(){return this.connect()},n.send=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this},n.emit=function(t){var e,n,r;if(Ht.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(o.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;var a={type:Nt.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"==typeof o[o.length-1]){var c=this.ids++;Vt("emitting packet with ack id %d",c);var u=o.pop();this._registerAckCallback(c,u),a.id=c}var h=null===(n=null===(e=this.io.engine)||void 0===e?void 0:e.transport)||void 0===n?void 0:n.writable,f=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired()),p=this.flags.volatile&&!h;return p?Vt("discard packet as the transport is not currently writable"):f?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a),this.flags={},this},n._registerAckCallback=function(t,e){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete r.acks[t];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===t&&(Vt("removing packet with ack id %d from the buffer",t),r.sendBuffer.splice(n,1));Vt("event with ack id %d has timed out after %d ms",t,i),e.call(r,new Error("operation has timed out"))}),i),s=function(){r.io.clearTimeoutFn(o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(r,n)};s.withError=!0,this.acks[t]=s}else this.acks[t]=e},n.emitWithAck=function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new Promise((function(n,i){var o=function(t,e){return t?i(t):n(e)};o.withError=!0,r.push(o),e.emit.apply(e,[t].concat(r))}))},n._addToQueue=function(t){var e,n=this;"function"==typeof t[t.length-1]&&(e=t.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:o({fromQueue:!0},this.flags)};t.push((function(t){if(r===n._queue[0]){var i=null!==t;if(i)r.tryCount>n._opts.retries&&(Vt("packet [%d] is discarded after %d tries",r.id,r.tryCount),n._queue.shift(),e&&e(t));else if(Vt("packet [%d] was successfully sent",r.id),n._queue.shift(),e){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];e.apply(void 0,[null].concat(s))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()},n._drainQueue=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Vt("draining queue"),this.connected&&0!==this._queue.length){var e=this._queue[0];!e.pending||t?(e.pending=!0,e.tryCount++,Vt("sending packet [%d] (try n°%d)",e.id,e.tryCount),this.flags=e.flags,this.emit.apply(this,e.args)):Vt("packet [%d] has already been sent and is waiting for an ack",e.id)}},n.packet=function(t){t.nsp=this.nsp,this.io._packet(t)},n.onopen=function(){var t=this;Vt("transport is open - connecting"),"function"==typeof this.auth?this.auth((function(e){t._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)},n._sendConnectPacket=function(t){this.packet({type:Nt.CONNECT,data:this._pid?o({pid:this._pid,offset:this._lastOffset},t):t})},n.onerror=function(t){this.connected||this.emitReserved("connect_error",t)},n.onclose=function(t,e){Vt("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()},n._clearAcks=function(){var t=this;Object.keys(this.acks).forEach((function(e){if(!t.sendBuffer.some((function(t){return String(t.id)===e}))){var n=t.acks[e];delete t.acks[e],n.withError&&n.call(t,new Error("socket has been disconnected"))}}))},n.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case Nt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Nt.EVENT:case Nt.BINARY_EVENT:this.onevent(t);break;case Nt.ACK:case Nt.BINARY_ACK:this.onack(t);break;case Nt.DISCONNECT:this.ondisconnect();break;case Nt.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}},n.onevent=function(t){var e=t.data||[];Vt("emitting event %j",e),null!=t.id&&(Vt("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))},n.emitEvent=function(e){if(this._anyListeners&&this._anyListeners.length){var n,r=i(this._anyListeners.slice());try{for(r.s();!(n=r.n()).done;)n.value.apply(this,e)}catch(t){r.e(t)}finally{r.f()}}t.prototype.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])},n.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];Vt("sending ack %j",i),e.packet({type:Nt.ACK,id:t,data:i})}}},n.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(delete this.acks[t.id],Vt("calling ack %s with %j",t.id,t.data),e.withError&&t.data.unshift(null),e.apply(this,t.data)):Vt("bad ack %s",t.id)},n.onconnect=function(t,e){Vt("socket connected with id %s",t),this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)},n.emitBuffered=function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){t.notifyOutgoingListeners(e),t.packet(e)})),this.sendBuffer=[]},n.ondisconnect=function(){Vt("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.destroy=function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)},n.disconnect=function(){return this.connected&&(Vt("performing disconnect (%s)",this.nsp),this.packet({type:Nt.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.close=function(){return this.disconnect()},n.compress=function(t){return this.flags.compress=t,this},n.timeout=function(t){return this.flags.timeout=t,this},n.onAny=function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this},n.prependAny=function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this},n.offAny=function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this},n.listenersAny=function(){return this._anyListeners||[]},n.onAnyOutgoing=function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this},n.prependAnyOutgoing=function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this},n.offAnyOutgoing=function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this},n.listenersAnyOutgoing=function(){return this._anyOutgoingListeners||[]},n.notifyOutgoingListeners=function(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var e,n=i(this._anyOutgoingListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t.data)}catch(t){n.e(t)}finally{n.f()}}},r(e,[{key:"disconnected",get:function(){return!this.connected}},{key:"active",get:function(){return!!this.subs}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}}])}(q);function zt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}zt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},zt.prototype.reset=function(){this.attempts=0},zt.prototype.setMin=function(t){this.ms=t},zt.prototype.setMax=function(t){this.max=t},zt.prototype.setJitter=function(t){this.jitter=t};var Wt=wt("socket.io-client:manager"),Yt=function(t){function e(e,n){var r,i;(r=t.call(this)||this).nsps={},r.subs=[],e&&"object"===p(e)&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",r.opts=n,H(r,n),r.reconnection(!1!==n.reconnection),r.reconnectionAttempts(n.reconnectionAttempts||1/0),r.reconnectionDelay(n.reconnectionDelay||1e3),r.reconnectionDelayMax(n.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),r.backoff=new zt({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==n.timeout?2e4:n.timeout),r._readyState="closed",r.uri=e;var o=n.parser||Dt;return r.encoder=new o.Encoder,r.decoder=new o.Decoder,r._autoConnect=!1!==n.autoConnect,r._autoConnect&&r.open(),r}a(e,t);var n=e.prototype;return n.reconnection=function(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection},n.reconnectionAttempts=function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)},n.reconnectionDelay=function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)},n.randomizationFactor=function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)},n.reconnectionDelayMax=function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)},n.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.maybeReconnectOnOpen=function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.open=function(t){var e=this;if(Wt("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Wt("opening %s",this.uri),this.engine=new dt(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=Mt(n,"open",(function(){r.onopen(),t&&t()})),o=function(n){Wt("error"),e.cleanup(),e._readyState="closed",e.emitReserved("error",n),t?t(n):e.maybeReconnectOnOpen()},s=Mt(n,"error",o);if(!1!==this._timeout){var a=this._timeout;Wt("connect attempt will timeout after %d",a);var c=this.setTimeoutFn((function(){Wt("connect attempt timed out after %d",a),i(),o(new Error("timeout")),n.close()}),a);this.opts.autoUnref&&c.unref(),this.subs.push((function(){e.clearTimeoutFn(c)}))}return this.subs.push(i),this.subs.push(s),this},n.connect=function(t){return this.open(t)},n.onopen=function(){Wt("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(Mt(t,"ping",this.onping.bind(this)),Mt(t,"data",this.ondata.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))},n.onping=function(){this.emitReserved("ping")},n.ondata=function(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}},n.ondecoded=function(t){var e=this;I((function(){e.emitReserved("packet",t)}),this.setTimeoutFn)},n.onerror=function(t){Wt("error",t),this.emitReserved("error",t)},n.socket=function(t,e){var n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Kt(this,t,e),this.nsps[t]=n),n},n._destroy=function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return void Wt("socket %s is still active, skipping close",r)}this._close()},n._packet=function(t){Wt("writing packet %j",t);for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)},n.cleanup=function(){Wt("cleanup"),this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()},n._close=function(){Wt("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")},n.disconnect=function(){return this._close()},n.onclose=function(t,e){var n;Wt("closed due to %s",t),this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.reconnect=function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Wt("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();Wt("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var r=this.setTimeoutFn((function(){e.skipReconnect||(Wt("attempting reconnect"),t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(Wt("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):(Wt("reconnect success"),e.onreconnect())})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){t.clearTimeoutFn(r)}))}},n.onreconnect=function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)},e}(q),$t=wt("socket.io-client"),Jt={};function Qt(t,e){"object"===p(t)&&(e=t,t=void 0);var n,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(Ct("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),Ct("parse %s",t),r=ht(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),i=r.source,o=r.id,s=r.path,a=Jt[o]&&s in Jt[o].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?($t("ignoring socket cache for %s",i),n=new Yt(i,e)):(Jt[o]||($t("new io instance for %s",i),Jt[o]=new Yt(i,e)),n=Jt[o]),r.query&&!e.query&&(e.query=r.queryKey),n.socket(r.path,e)}return o(Qt,{Manager:Yt,Socket:Kt,io:Qt,connect:Qt}),Qt},"object"==typeof e&&void 0!==r?r.exports=a():"function"==typeof define&&define.amd?define(a):(s="undefined"!=typeof globalThis?globalThis:s||self).io=a(),t("default",r.exports),r.exports.formatArgs,r.exports.save,r.exports.load,r.exports.useColors,r.exports.storage,r.exports.destroy,r.exports.colors,r.exports.log}),{})}}}));

System.register("bundle://KKHomeBundle/_virtual/socket.io.mjs_cjs=&original=.js",["./socket.io.js","./cjs-loader.mjs"],(function(e,t){var s,r;return{setters:[function(t){s=t.__cjsMetaURL;var r={};r.__cjsMetaURL=t.__cjsMetaURL,r.default=t.default,e(r)},function(e){r=e.default}],execute:function(){s||r.throwInvalidWrapper("./socket.io.js",t.meta.url),r.require(s)}}}));

System.register("bundle://KKHomeBundle/_virtual/SocketIO.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./socket.io.mjs_cjs=&original=.js","./kk.ts","./socket.io.js"],(function(t){var o,n,e,c,s,i;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator},function(t){c=t.default},null,function(t){s=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"95d83Oc4r1AG7KqOHoHxPtU","SocketIO",void 0);e.ccclass,e.property,t("default",new(function(){function t(){this._socket=null}var n=t.prototype;return n.connect=function(t){var o=this;return new Promise((function(n,e){var r,u=null!=t?t:null==(r=s.config)||null==(r=r.service)?void 0:r.socketURL;if(o.disconnect(),o._socket=i(u,{transports:["websocket"],auth:null!=c&&c.info.token?{token:null==c?void 0:c.info.token}:void 0,reconnection:!0}),!o._socket)return e(new Error("Không khởi tạo được socket."));o._socket.on("connect",(function(){var t;console.log("Socket connected với id:",null==(t=o._socket)?void 0:t.id),n()})),o._socket.on("connect_error",(function(t){console.error("Lỗi kết nối socket:",t),e(t)})),o._socket.on("disconnect",(function(t){console.warn("Socket đã disconnect:",t)}))}))},n.disconnect=function(){this._socket&&this._socket.connected&&this._socket.disconnect(),this._socket=null},n.reqAsync=function(t,o){var n=this;return new Promise((function(e,c){if(!n._socket||!n._socket.connected)return c(new Error("Socket chưa kết nối."));n._socket.emit(t,o,(function(t){e(t)}))}))},n.on=function(t,o){this._socket&&this._socket.on(t,o)},n.off=function(t,o){this._socket&&(o?this._socket.off(t,o):this._socket.off(t))},o(t,[{key:"socket",get:function(){return this._socket}}]),t}()));n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/SocketManager.ts",["cc","./BaseSocket.ts"],(function(t){var e,o,s,c;return{setters:[function(t){e=t.cclegacy,o=t.warn},function(t){s=t.BaseSocket,c=t.SocketErrCode}],execute:function(){e._RF.push({},"489c5+jG5ZFhLK9D9DA7tR7","SocketManager",void 0);t("default",function(){function t(){this._sockets={}}var e=t.prototype;return e.connectAsync=function(t,e,o){var c=this;return void 0===o&&(o=0),new Promise((function(n,i){c._sockets[o]||(c._sockets[o]=new s),c._sockets[o].connectAsync(t,e).then(n).catch(i)}))},e.close=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=0),this._sockets[e]&&(this._sockets[e].close(t),t&&delete this._sockets[e])},e.reqAsync=function(t,e,s,n){var i=this;return void 0===s&&(s=!1),void 0===n&&(n=0),new Promise((function(r,u){i._sockets[n]?i._sockets[n].reqAsync(t,e,s).then(r).catch(u):(o("This ws does not exist!"),u(c.NoThisSocket))}))},e.on=function(t,e,o,s){void 0===s&&(s=0),this._sockets[s]&&this._sockets[s].on(t,e,o)},e.off=function(t,e,o,s){void 0===s&&(s=0),this._sockets[s]&&this._sockets[s].off(t,e,o)},t}());e._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/SoundManager.ts",["cc"],(function(t){var i,u,e,s,o;return{setters:[function(t){i=t.cclegacy,u=t.assetManager,e=t.warn,s=t.Node,o=t.AudioSource}],execute:function(){i._RF.push({},"cdc1829IlZKh6mOJsAkLqB5","SoundManager",void 0);t("default",function(){function t(){this._bundle="",this._path="",this._musicVolume=1,this._effectVolume=1,this._isMusicMute=!1,this._isEffectMute=!1,this._musicAudio=null,this._effectsMap=new Map,this._audioID=0}var i=t.prototype;return i.init=function(t,i){this._bundle=t,this._path=i},i.playMusicAsync=function(t,i,c){var n=this;return void 0===c&&(c=!0),new Promise((function(f,a){var d=u.getBundle(i||n._bundle);if(!d)return e("Bundle not found!"),void a();d.load(n._path+t,(function(t,i){if(t)return e(t),void a();n.stopMusic();var u=new s;n._musicAudio=u.addComponent(o),n._musicAudio.clip=i,n._musicAudio.volume=n._musicVolume*(n._isMusicMute?0:1),n._musicAudio.loop=c,n._musicAudio.play(),c?f():u.on(o.EventType.ENDED,f)}))}))},i.stopMusic=function(){this._musicAudio&&(this._clearAudio(this._musicAudio),this._musicAudio=null)},i.pauseMusic=function(){if(this._musicAudio){if(this._musicAudio.state==o.AudioState.PAUSED)return;this._musicAudio.pause()}},i.resumeMusic=function(){if(this._musicAudio){if(this._musicAudio.state!=o.AudioState.PAUSED)return;this._musicAudio.play()}},i.isMusicPlaying=function(){return!!this._musicAudio&&this._musicAudio.playing},i.playEffectAsync=function(t,i,c){var n=this;return void 0===c&&(c=!1),new Promise((function(f,a){var d=u.getBundle(i||n._bundle);if(!d)return e("Bundle not found!"),void a();d.load(n._path+t,(function(t,i){if(t)return e(t),void a();var u=new s,d=u.addComponent(o);d.clip=i,d.volume=n._effectVolume*(n._isEffectMute?0:1),d.loop=c,d.play(),n._audioID+=1;var _=n._audioID;n._effectsMap.set(_,d),c||u.on(o.EventType.ENDED,(function(){n.stopEffect(_)})),f(_)}))}))},i.stopEffect=function(t){var i=this._effectsMap.get(t);i&&(this._clearAudio(i),this._effectsMap.delete(t))},i.stopAllEffects=function(){var t=this;this._effectsMap.forEach((function(i,u){t._clearAudio(i)})),this._effectsMap.clear()},i.stopAll=function(){this.stopMusic(),this.stopAllEffects()},i.pauseEffect=function(t){var i=this._effectsMap.get(t);if(i){if(i.state==o.AudioState.PAUSED)return;i.pause()}},i.resumeEffect=function(t){var i=this._effectsMap.get(t);if(i){if(i.state!=o.AudioState.PAUSED)return;i.play()}},i.setMusicVolume=function(t){this._musicVolume=t,this._musicAudio&&(this._musicAudio.volume=t*(this._isMusicMute?0:1))},i.setEffectsVolume=function(t){var i=this;this._effectVolume=t,this._effectsMap.forEach((function(u,e){u.volume=t*(i._isEffectMute?0:1)}))},i.setMute=function(t){this.setMusicMute(t),this.setEffectMute(t)},i.setMusicMute=function(t){t!=this._isMusicMute&&(this._isMusicMute=t,this.setMusicVolume(this._musicVolume))},i.setEffectMute=function(t){t!=this._isEffectMute&&(this._isEffectMute=t,this.setEffectsVolume(this._effectVolume))},i._clearAudio=function(t){t.node.off(o.EventType.ENDED),t.stop(),t.clip=null,t.node.destroy()},t}());i._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/SpriteNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosHelper.ts"],(function(e){var t,n,r,o,i,a,u,l,s,p,c,d,f,m,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,u=e._decorator,l=e.CCInteger,s=e.SpriteFrame,p=e.NodePool,c=e.Node,d=e.Sprite,f=e.Layout,m=e.tween,v=e.Component},function(e){y=e.default}],execute:function(){var h,b,g,F,P,O,S,w,N;a._RF.push({},"d616f4/WRpCBb0yvPBiWy0r","SpriteNumber",void 0);var C=u.ccclass,_=u.property;e("SpriteNumber",(h=C("SpriteNumber"),b=_({type:l,tooltip:"数字图片间隔距离"}),g=_({type:l,tooltip:"小数点或逗号垂直方向偏移"}),F=_({type:[s],tooltip:"0123456789.,+-"}),h((S=t((O=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"divX",S,o(t)),r(t,"dotOffsetY",w,o(t)),r(t,"numFrms",N,o(t)),t._v="",t.ndPool=new p,t}n(t,e);var a=t.prototype;return a.getOne=function(){return 0==this.ndPool.size()?y.addSprite(new c,{spriteFrame:null}):this.ndPool.get().getComponent(d)},a.removeOne=function(e){this.ndPool.put(e)},a.start=function(){y.addLayout(this.node,{type:f.Type.HORIZONTAL,spacingX:this.divX})},a.onDestroy=function(){this.ndPool.clear(),this.ndPool=null},a.numVarTween=function(e,t,n,r){var o=this;void 0===r&&(r=1);var i=Math.round(20*r),a=(t-e)/i;m(this.node).delay(.05).call((function(){e+=a,o.value=n(e)})).union().repeat(i).call((function(){o.value=n(t)})).start()},i(t,[{key:"value",get:function(){return this._v},set:function(e){var t=this,n=String(e);t._v=n;for(var r=t.node.children.length-1;r>=0;--r)t.removeOne(t.node.children[r]);for(var o=0,i=0;i<n.length;++i){var a=t.getOne();if(o=0,"+"==n[i])a.spriteFrame=t.numFrms[12];else if("-"==n[i])a.spriteFrame=t.numFrms[13];else{var u="."==n[i],l=","==n[i];a.spriteFrame=u?t.numFrms[10]:l?t.numFrms[11]:t.numFrms[Number(n[i])],(u||l)&&(o=t.dotOffsetY)}a.node.setPosition(0,o),a.node.parent=t.node}}}]),t}(v)).prototype,"divX",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(O.prototype,"dotOffsetY",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=t(O.prototype,"numFrms",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=O))||P));a._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/TimeHelper.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d405cKVB+VLyJ44LBTBHwRg","TimeHelper",void 0);e("default",function(){function e(){}return e.getCurFullDate=function(e,t){void 0===t&&(t="/");var n="",r=e?new Date(e):new Date;n+=r.getFullYear()+t;var u=r.getMonth()+1;n+=u<10?"0"+u:u,n+=t;var a=r.getDate();return n+=a<10?"0"+a:a},e.getCurDate=function(e,t){void 0===t&&(t="/");var n="",r=e?new Date(e):new Date,u=r.getMonth()+1;n+=u<10?"0"+u:u,n+=t;var a=r.getDate();return n+=a<10?"0"+a:a},e.getDayOfMonth=function(e){return(e?new Date(e):new Date).getDate()},e.getCurDetailTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()+t+n.getSeconds()+t+n.getMilliseconds()},e.getCurNormalTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()+t+n.getSeconds()},e.getCurShortTime=function(e,t){void 0===t&&(t=":");var n=e?new Date(e):new Date;return n.getHours()+t+n.getMinutes()},e.getTimeStamp=function(){return Date.now()},e}());t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.warn,s=e.Component}],execute:function(){var i;n._RF.push({},"20f52nE8qZBebODYeB7lFTm","UIBase",void 0);var c=r.ccclass;r.property,e("UIBase",c("UIBase")(i=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).refAssets=[],t.recvData=void 0,t}t(n,e);var r=n.prototype;return r.onBtnClick=function(e,t){},r.onDestroy=function(){this.refAssets.forEach((function(e,t){e.decRef()})),this.refAssets=null},r.getObj=function(e,t,n){var r,s,i;"string"==typeof e?(r=this.node,s=e,i=t):(r=e,s=t,i=n);for(var c=s.split("."),a=0;a<c.length;++a)if(!(r=r.getChildByName(c[a])))return c.length>1&&o("Child is NULL!",c[a]),null;return i?r.getComponent(i):r},n}(s))||i);n._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/UIConfig.ts",["cc"],(function(e){var P;return{setters:[function(e){P=e.cclegacy}],execute:function(){P._RF.push({},"234edNDZPJMfqZX3vbxtXKO","UIConfig",void 0);e("UICacheMode",{NoCache:0,Cache:1,Stay:2}),e("LAYER_PATH","Prefabs/Layer/"),e("POPUP_PATH","Prefabs/Popup/"),e("PANEL_PATH","Prefabs/Panel/"),e("WIDGET_PATH","Prefabs/Widget/");P._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./kk.ts","./UIConfig.ts","./UIBase.ts","./AsyncHelper.ts","./CocosHelper.ts"],(function(e){var n,r,t,a,o,u,c,s,i,d,p,f,g,l,y,m,h,C,v,b;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,a=e.Node,o=e.UITransform,u=e.BlockInputEvents,c=e.Prefab,s=e.assetManager,i=e.Sprite,d=e.UIOpacity,p=e.instantiate},function(e){f=e.default},function(e){g=e.UICacheMode,l=e.LAYER_PATH,y=e.POPUP_PATH,m=e.PANEL_PATH,h=e.WIDGET_PATH},function(e){C=e.UIBase},function(e){v=e.default},function(e){b=e.default}],execute:function(){t._RF.push({},"c8d38n/KhpOWo+93AqiABif","UIManager",void 0);e("default",function(){function e(){this._curLayerConf=void 0,this.pureBanFrm=null}var t=e.prototype;return t.getCurLayerConf=function(){return this._curLayerConf},t.getCurLayer=function(){return f.godNode.getChildByName(this._curLayerConf.name)},t.goLayerAsync=function(){var e=n(r().mark((function e(n,t){var a,o,u,c,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=(a=this)._curLayerConf)||o.name!==n.name){e.next=5;break}return a.resetCurLayerAsync(t),e.abrupt("return");case 5:if(a._curLayerConf=n,n.cacheMode!=g.Stay){e.next=17;break}if(!(u=f.godNode.getChildByName(n.name))){e.next=17;break}return u.active=!0,c=n.script?n.script:n.name,(s=u.getComponent(c)).recvData=t,s.refresh(),f.debugMgr.log("show Layer",n.name),a._clearLayer(o),e.abrupt("return");case 17:return e.next=19,a._genUIBaseAsync(n,l,t);case 19:e.sent.parent=f.godNode,f.debugMgr.log("create Layer",n.name),a._clearLayer(o);case 23:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.resetCurLayerAsync=function(){var e=n(r().mark((function e(n){var t,a,o,u,c,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=(t=this)._curLayerConf)){e.next=20;break}if(a.cacheMode!=g.Stay){e.next=12;break}o=f.godNode.getChildByName(a.name),u=a.script?a.script:a.name,(c=o.getComponent(u)).recvData=n,c.refresh(),f.debugMgr.log("refresh Layer",a.name),e.next=20;break;case 12:return(s=f.godNode.getChildByName(a.name)).name="removed",e.next=16,t._genUIBaseAsync(a,l,n);case 16:e.sent.parent=f.godNode,s.destroy(),f.debugMgr.log("reset Layer",a.name);case 20:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t.preLoadLayerAsync=function(){var e=n(r().mark((function e(n,t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.getBundle(n.bundle)){e.next=5;break}return e.next=4,v.loadBundleAsync(n.bundle);case 4:a=e.sent;case 5:return e.next=7,v.preloadAsync(a,l+n.name,c,t);case 7:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),t._clearLayer=function(e){if(e){var n=f.godNode.getChildByName(e.name);e.cacheMode==g.Stay?(n.active=!1,f.debugMgr.log("hide Layer",e.name)):(n.destroy(),f.debugMgr.log("destroy Layer",e.name))}},t.showPopupAsync=function(){var e=n(r().mark((function e(n,t){var o,c,s,p,g,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,c=new a(n.name),o.getCurLayer().addChild(c),c.addComponent(u),b.addWidget(c,{left:0,right:0,top:0,bottom:0}),s=new a("dark"),o.pureBanFrm||(o.pureBanFrm=b.genPureColorSpriteFrame(),o.pureBanFrm.addRef()),s.addComponent(i).spriteFrame=o.pureBanFrm,s.addComponent(d).opacity=180,s.parent=c,b.addWidget(s,{left:0,right:0,top:0,bottom:0}),e.next=13,o._genUIBaseAsync(n,y,t);case 13:return p=e.sent,g=n.script?n.script:n.name,l=p.getComponent(g),p.parent=c,null==l||l.showAnim(),f.debugMgr.log("show Popup",n.name),e.abrupt("return",new Promise((function(e,n){l.onDestroyCall=e})));case 20:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.getPopup=function(e,n){void 0===n&&(n=null),n||(n=this._curLayerConf);var r=f.godNode.getChildByName(n.name);return r?r.getChildByName(e.name):null},t.closeAllPopup=function(){var e=f.godNode.getChildByName(this._curLayerConf.name);e&&e.children.forEach((function(e,n){e.name.endsWith("Popup")&&e.destroy()}))},t._autoRemovePopup=function(e){null==e||e.destroy(),f.debugMgr.log("close Popup",e.name)},t.createPanelAsync=function(){var e=n(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._genUIBaseAsync(n,m,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t.createWidgetAsync=function(){var e=n(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createWidgetAsync",n,t),e.next=3,this._genUIBaseAsync(n,h,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),t._genUIBaseAsync=function(){var e=n(r().mark((function e(n,t,a){var o,u,i,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.getBundle(n.bundle)){e.next=5;break}return e.next=4,v.loadBundleAsync(n.bundle);case 4:o=e.sent;case 5:return e.next=7,v.loadAsync(o,t+n.name,c);case 7:return u=e.sent,i=p(u),d=n.script?n.script:n.name,(f=i.getComponent(d))||(f=i.addComponent(C)),f.recvData=a,n.cacheMode==g.Cache?0==u.refCount&&u.addRef():(u.addRef(),f.refAssets.push(u)),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),t.banTouch=function(){if(!f.godNode.getChildByName("_ban")){var e=new a("_ban");e.addComponent(o).setContentSize(f.godNode.getComponent(o).contentSize),f.godNode.addChild(e),e.addComponent(u)}},t.unbanTouch=function(){var e=f.godNode.getChildByName("_ban");e&&e.destroy()},e}());t._RF.pop()}}}));

System.register("bundle://KKHomeBundle/_virtual/Xor.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"11948OXRWxFSb/uOlkSXeMT","Xor",void 0);r("default",function(){function r(){}return r.xor=function(r,t){try{if(!r||!t)return"";for(var e=0,n=t.length-1;n>=0;--n)e+=t.charCodeAt(n);for(var o="",u=r.length-1;u>=0;--u){var c=r.charCodeAt(u)^e;o+=String.fromCharCode(c)}return o}catch(r){return""}},r}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/KKHomeBundle', 'bundle://KKHomeBundle/_virtual/KKHomeBundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});